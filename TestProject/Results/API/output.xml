<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 4.0.3 (Python 3.7.4 on linux)" generated="20210729 08:04:56.093" rpa="false" schemaversion="2">
<suite id="s1" name="API" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API">
<suite id="s1-s1" name="1-Reviewing-Users" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API/1-Reviewing-Users.robot">
<kw name="Run Keywords" library="BuiltIn" type="SETUP">
<arg>Kill Web Application</arg>
<arg>AND</arg>
<arg>Replace Database With New Database Having Users</arg>
<arg>AND</arg>
<arg>Start Web Application With No Init Procedure</arg>
<arg>AND</arg>
<arg>Initialize Database Connection</arg>
<arg>AND</arg>
<arg>Verify Tables</arg>
<arg>AND</arg>
<arg>Fetch All System Users From Db</arg>
<arg>AND</arg>
<arg>Filter System Users By</arg>
<arg>username</arg>
<arg>\${SYSTEM_USERS_USERNAMES}</arg>
<doc>Executes all the given keywords in a sequence.</doc>
<kw name="Kill Web Application" library="Common">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210729 08:04:56.734" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210729 08:04:56.743" level="INFO">${rc} = 0</msg>
<msg timestamp="20210729 08:04:56.743" level="INFO">${pids} = 9637</msg>
<status status="PASS" starttime="20210729 08:04:56.730" endtime="20210729 08:04:56.743"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:04:56.746" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210729 08:04:56.743" endtime="20210729 08:04:56.746"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:04:56.747" level="INFO">${pids} = ['9637']</msg>
<status status="PASS" starttime="20210729 08:04:56.747" endtime="20210729 08:04:56.747"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">9637</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:04:56.750" level="INFO">Running command 'kill 9637 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:04:56.747" endtime="20210729 08:04:56.750"/>
</kw>
<status status="PASS" starttime="20210729 08:04:56.747" endtime="20210729 08:04:56.750"/>
</iter>
<status status="PASS" starttime="20210729 08:04:56.747" endtime="20210729 08:04:56.751"/>
</for>
<status status="PASS" starttime="20210729 08:04:56.747" endtime="20210729 08:04:56.751"/>
</branch>
<status status="PASS" starttime="20210729 08:04:56.746" endtime="20210729 08:04:56.751"/>
</if>
<status status="PASS" starttime="20210729 08:04:56.730" endtime="20210729 08:04:56.751"/>
</kw>
<kw name="Replace Database With New Database Having Users" library="DbManager">
<kw name="Set Variable" library="BuiltIn">
<var>${source}</var>
<arg>${EXECDIR}${/}TestData${/}demo_app_with_users.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:56.752" level="INFO">${source} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:56.751" endtime="20210729 08:04:56.752"/>
</kw>
<kw name="Get Path To App Database" library="DbManager">
<var>${target}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:56.752" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210729 08:04:56.752" endtime="20210729 08:04:56.752"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210729 08:04:56.753" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210729 08:04:56.752" endtime="20210729 08:04:56.753"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:56.753" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:56.753" endtime="20210729 08:04:56.753"/>
</kw>
<msg timestamp="20210729 08:04:56.753" level="INFO">${target} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:56.752" endtime="20210729 08:04:56.753"/>
</kw>
<kw name="Run" library="OperatingSystem">
<arg>cp ${source} ${target}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:04:56.756" level="INFO">Running command 'cp /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:04:56.753" endtime="20210729 08:04:56.757"/>
</kw>
<status status="PASS" starttime="20210729 08:04:56.751" endtime="20210729 08:04:56.757"/>
</kw>
<kw name="Start Web Application With No Init Procedure" library="Common">
<kw name="Start Process" library="Process">
<arg>export FLASK_APP\=demo_app;flask run --host\=0.0.0.0 --port\=8080</arg>
<arg>shell=True</arg>
<arg>alias=flasky</arg>
<arg>cwd=${EXECDIR}${/}..${/}Flasky</arg>
<doc>Starts a new process on background.</doc>
<msg timestamp="20210729 08:04:56.758" level="INFO">Starting process:
export FLASK_APP=demo_app;flask run --host=0.0.0.0 --port=8080</msg>
<status status="PASS" starttime="20210729 08:04:56.757" endtime="20210729 08:04:56.761"/>
</kw>
<kw name="Sleep" library="BuiltIn">
<arg>1.5s</arg>
<doc>Pauses the test executed for the given time.</doc>
<msg timestamp="20210729 08:04:58.267" level="INFO">Slept 1 second 500 milliseconds</msg>
<status status="PASS" starttime="20210729 08:04:56.761" endtime="20210729 08:04:58.267"/>
</kw>
<status status="PASS" starttime="20210729 08:04:56.757" endtime="20210729 08:04:58.268"/>
</kw>
<kw name="Initialize Database Connection" library="DbManager">
<kw name="Get Path To App Database" library="DbManager">
<var>${path_to_database}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:58.269" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210729 08:04:58.269" endtime="20210729 08:04:58.269"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210729 08:04:58.269" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210729 08:04:58.269" endtime="20210729 08:04:58.269"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:58.270" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:58.270" endtime="20210729 08:04:58.270"/>
</kw>
<msg timestamp="20210729 08:04:58.270" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:58.268" endtime="20210729 08:04:58.270"/>
</kw>
<kw name="Connect To Database Using Custom Params" library="DatabaseLibrary">
<arg>sqlite3</arg>
<arg>database='${path_to_database}'</arg>
<doc>Loads the DB API 2.0 module given `dbapiModuleName` then uses it to
connect to the database using the map string `db_custom_param_string`.</doc>
<msg timestamp="20210729 08:04:58.272" level="INFO">Executing : Connect To Database Using Custom Params : sqlite3.connect(db_api_2.connect(database='/home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite')) </msg>
<status status="PASS" starttime="20210729 08:04:58.270" endtime="20210729 08:04:58.272"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.268" endtime="20210729 08:04:58.272"/>
</kw>
<kw name="Verify Tables" library="DbManager">
<kw name="Table Must Exist" library="DatabaseLibrary">
<arg>user</arg>
<doc>Check if the table given exists in the database. Set optional input `sansTran` to True to run command without an
explicit transaction commit or rollback.</doc>
<msg timestamp="20210729 08:04:58.273" level="INFO">Executing : Table Must Exist  |  user </msg>
<msg timestamp="20210729 08:04:58.273" level="INFO">Executing : Row Count  |  SELECT name FROM sqlite_master WHERE type='table' AND name='user' COLLATE NOCASE </msg>
<status status="PASS" starttime="20210729 08:04:58.272" endtime="20210729 08:04:58.273"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.272" endtime="20210729 08:04:58.273"/>
</kw>
<kw name="Fetch All System Users From Db" library="DbManager">
<kw name="Query" library="DatabaseLibrary">
<var>${users}</var>
<arg>${QUERY_ALL_USERS}</arg>
<doc>Uses the input `selectStatement` to query for the values that will be returned as a list of tuples. Set optional
input `sansTran` to True to run command without an explicit transaction commit or rollback.
Set optional input `returnAsDict` to True to return values as a list of dictionaries.</doc>
<msg timestamp="20210729 08:04:58.273" level="INFO">Executing : Query  |  select username, firstname, lastname, phone, token from user; </msg>
<msg timestamp="20210729 08:04:58.274" level="INFO">${users} = [('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'), ('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTU...</msg>
<status status="PASS" starttime="20210729 08:04:58.273" endtime="20210729 08:04:58.274"/>
</kw>
<kw name="Create List" library="BuiltIn">
<var>${SYSTEM_USERS}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210729 08:04:58.274" level="INFO">${SYSTEM_USERS} = []</msg>
<status status="PASS" starttime="20210729 08:04:58.274" endtime="20210729 08:04:58.274"/>
</kw>
<for flavor="IN">
<var>${user}</var>
<value>@{users}</value>
<iter>
<var name="${user}">('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:58.275" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:04:58.274" endtime="20210729 08:04:58.275"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:58.275" endtime="20210729 08:04:58.275"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:58.275" endtime="20210729 08:04:58.276"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.274" endtime="20210729 08:04:58.276"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:58.276" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:04:58.276" endtime="20210729 08:04:58.276"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:58.276" endtime="20210729 08:04:58.277"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:58.277" endtime="20210729 08:04:58.277"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.276" endtime="20210729 08:04:58.277"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser3', 'John', 'Brown', '0508094677', 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:58.277" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:04:58.277" endtime="20210729 08:04:58.277"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:58.277" endtime="20210729 08:04:58.278"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:58.278" endtime="20210729 08:04:58.279"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.277" endtime="20210729 08:04:58.279"/>
</iter>
<status status="PASS" starttime="20210729 08:04:58.274" endtime="20210729 08:04:58.279"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>@{SYSTEM_USERS}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210729 08:04:58.279" level="INFO">@{SYSTEM_USERS} = [ {'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'} | {'username': 'SuperDuperUser2', 'f...</msg>
<status status="PASS" starttime="20210729 08:04:58.279" endtime="20210729 08:04:58.279"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.273" endtime="20210729 08:04:58.280"/>
</kw>
<kw name="Filter System Users By">
<arg>username</arg>
<arg>\${SYSTEM_USERS_USERNAMES}</arg>
<doc>This keyword expects SYSTEM_USERS suite variable being present in the suite.
SYSTEM_USERS is a list of system users, each of which is a dictionary
An example of a system user:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
As you see, there are several keys such as username, firstname, lastname, phone and token.
This keyword filters by SYSTEM_USERS with a given key (e.g. username).
That is, all the usernames in SYSTEM_USERS are placed into a new list.
Then this keyword sets a suite variable with that new list. The name of the suite variable
is provided in DYNAMIC_VARIABLE_NAME variable.
Some example usages:
(1) gives all the usernames in SYSTEM_USERS_USERNAMES suite variable:
Filter System Users By username ${SYSTEM_USERS_USERNAMES}
(2) gives all lastnames in SYSTEM_USERS_LASTNAMES suite variable:
Filter System Users By lastname ${SYSTEM_USERS_LASTNAMES}</doc>
<kw name="Create List" library="BuiltIn">
<var>${list}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210729 08:04:58.280" level="INFO">${list} = []</msg>
<status status="PASS" starttime="20210729 08:04:58.280" endtime="20210729 08:04:58.280"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="Append To List" library="Collections">
<arg>${list}</arg>
<arg>${system_user}[${key}]</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:58.281" endtime="20210729 08:04:58.281"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.281" endtime="20210729 08:04:58.281"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="Append To List" library="Collections">
<arg>${list}</arg>
<arg>${system_user}[${key}]</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:58.281" endtime="20210729 08:04:58.281"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.281" endtime="20210729 08:04:58.281"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="Append To List" library="Collections">
<arg>${list}</arg>
<arg>${system_user}[${key}]</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:58.281" endtime="20210729 08:04:58.282"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.281" endtime="20210729 08:04:58.282"/>
</iter>
<status status="PASS" starttime="20210729 08:04:58.280" endtime="20210729 08:04:58.282"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${DYNAMIC_VARIABLE_NAME}</arg>
<arg>${list}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210729 08:04:58.282" level="INFO">${SYSTEM_USERS_USERNAMES} = ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3']</msg>
<status status="PASS" starttime="20210729 08:04:58.282" endtime="20210729 08:04:58.282"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.280" endtime="20210729 08:04:58.282"/>
</kw>
<status status="PASS" starttime="20210729 08:04:56.730" endtime="20210729 08:04:58.282"/>
</kw>
<test id="s1-s1-t1" name="With No Token, Reading Users From API Should Return Error">
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:58.290" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:58.283" endtime="20210729 08:04:58.290"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<msg timestamp="20210729 08:04:58.291" level="FAIL">SUCCESS != FAILURE</msg>
<status status="FAIL" starttime="20210729 08:04:58.290" endtime="20210729 08:04:58.291"/>
</kw>
<doc>Given no token, when reading usernames from API, the api
must return FAILURE in its response status</doc>
<status status="FAIL" starttime="20210729 08:04:58.282" endtime="20210729 08:04:58.291">SUCCESS != FAILURE</status>
</test>
<test id="s1-s1-t2" name="With Invalid Token, Reading Users From API Should Return Error">
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:58.292" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210729 08:04:58.292" endtime="20210729 08:04:58.292"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:58.296" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:58.292" endtime="20210729 08:04:58.296"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<msg timestamp="20210729 08:04:58.297" level="FAIL">SUCCESS != FAILURE</msg>
<status status="FAIL" starttime="20210729 08:04:58.296" endtime="20210729 08:04:58.297"/>
</kw>
<doc>Given an invalid token, when reading usernames from API, the api
must return FAILURE in its response status</doc>
<status status="FAIL" starttime="20210729 08:04:58.291" endtime="20210729 08:04:58.297">SUCCESS != FAILURE</status>
</test>
<test id="s1-s1-t3" name="With Valid Token, Reading Users From API Matches With Users From DB">
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="With Valid Token, Reading Users From API Should Return All System Users' Usernames">
<arg>${system_user}</arg>
<doc>The system_user parameter is a dictionary. An example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
This keyword uses the token of system_user to make a GET request.
It then expects that response status is SUCCESS and the response payload
contains usernames (i.e. SYSTEM_USERS_USERNAMES) read from the database.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${system_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:58.299" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210729 08:04:58.299" endtime="20210729 08:04:58.299"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:58.303" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:58.299" endtime="20210729 08:04:58.303"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:58.303" endtime="20210729 08:04:58.304"/>
</kw>
<kw name="Lists Should Be Equal" library="Collections">
<arg>${SYSTEM_USERS_USERNAMES}</arg>
<arg>${response}[payload]</arg>
<doc>Fails if given lists are unequal.</doc>
<status status="PASS" starttime="20210729 08:04:58.304" endtime="20210729 08:04:58.304"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.298" endtime="20210729 08:04:58.304"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.298" endtime="20210729 08:04:58.304"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="With Valid Token, Reading Users From API Should Return All System Users' Usernames">
<arg>${system_user}</arg>
<doc>The system_user parameter is a dictionary. An example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
This keyword uses the token of system_user to make a GET request.
It then expects that response status is SUCCESS and the response payload
contains usernames (i.e. SYSTEM_USERS_USERNAMES) read from the database.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${system_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:58.305" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210729 08:04:58.305" endtime="20210729 08:04:58.305"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:58.308" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:58.305" endtime="20210729 08:04:58.309"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:58.309" endtime="20210729 08:04:58.309"/>
</kw>
<kw name="Lists Should Be Equal" library="Collections">
<arg>${SYSTEM_USERS_USERNAMES}</arg>
<arg>${response}[payload]</arg>
<doc>Fails if given lists are unequal.</doc>
<status status="PASS" starttime="20210729 08:04:58.309" endtime="20210729 08:04:58.309"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.304" endtime="20210729 08:04:58.310"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.304" endtime="20210729 08:04:58.310"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="With Valid Token, Reading Users From API Should Return All System Users' Usernames">
<arg>${system_user}</arg>
<doc>The system_user parameter is a dictionary. An example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
This keyword uses the token of system_user to make a GET request.
It then expects that response status is SUCCESS and the response payload
contains usernames (i.e. SYSTEM_USERS_USERNAMES) read from the database.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${system_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:58.310" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210729 08:04:58.310" endtime="20210729 08:04:58.310"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:58.315" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:58.311" endtime="20210729 08:04:58.315"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:58.318" endtime="20210729 08:04:58.318"/>
</kw>
<kw name="Lists Should Be Equal" library="Collections">
<arg>${SYSTEM_USERS_USERNAMES}</arg>
<arg>${response}[payload]</arg>
<doc>Fails if given lists are unequal.</doc>
<status status="PASS" starttime="20210729 08:04:58.318" endtime="20210729 08:04:58.319"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.310" endtime="20210729 08:04:58.319"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.310" endtime="20210729 08:04:58.319"/>
</iter>
<status status="PASS" starttime="20210729 08:04:58.298" endtime="20210729 08:04:58.319"/>
</for>
<doc>Valid token results in reading all users from the database regardless of the system_user
That is, as long as system_user has a valid token, it can retrive usernames from the API.</doc>
<status status="PASS" starttime="20210729 08:04:58.297" endtime="20210729 08:04:58.319"/>
</test>
<kw name="Kill Web Application" library="Common" type="TEARDOWN">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210729 08:04:58.323" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210729 08:04:58.330" level="INFO">${rc} = 0</msg>
<msg timestamp="20210729 08:04:58.330" level="INFO">${pids} = 9660
9667
9674</msg>
<status status="PASS" starttime="20210729 08:04:58.320" endtime="20210729 08:04:58.330"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:04:58.331" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210729 08:04:58.331" endtime="20210729 08:04:58.331"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:04:58.332" level="INFO">${pids} = ['9660', '9667', '9674']</msg>
<status status="PASS" starttime="20210729 08:04:58.332" endtime="20210729 08:04:58.332"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">9660</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:04:58.336" level="INFO">Running command 'kill 9660 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:04:58.332" endtime="20210729 08:04:58.336"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.332" endtime="20210729 08:04:58.337"/>
</iter>
<iter>
<var name="${pid}">9667</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:04:58.340" level="INFO">Running command 'kill 9667 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:04:58.337" endtime="20210729 08:04:58.340"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.337" endtime="20210729 08:04:58.340"/>
</iter>
<iter>
<var name="${pid}">9674</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:04:58.347" level="INFO">Running command 'kill 9674 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:04:58.341" endtime="20210729 08:04:58.348"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.340" endtime="20210729 08:04:58.348"/>
</iter>
<status status="PASS" starttime="20210729 08:04:58.332" endtime="20210729 08:04:58.348"/>
</for>
<status status="PASS" starttime="20210729 08:04:58.332" endtime="20210729 08:04:58.348"/>
</branch>
<status status="PASS" starttime="20210729 08:04:58.331" endtime="20210729 08:04:58.348"/>
</if>
<status status="PASS" starttime="20210729 08:04:58.320" endtime="20210729 08:04:58.348"/>
</kw>
<doc>This test suite contains test cases for CRF Demo API.
Documentation for the API can be found:
https://github.com/Interview-demoapp/Flasky
The acceptance criteria we verify here is
"1: As an API Consumer, I can review users registered in the system"
Definitions
(1) System User: The user, who is registered to the system under test
(2) API User: The user, who calls the API to fetch information (i.e. username) about the system user</doc>
<status status="FAIL" starttime="20210729 08:04:56.121" endtime="20210729 08:04:58.348"/>
</suite>
<suite id="s1-s2" name="2-Getting-Personal-Information" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API/2-Getting-Personal-Information.robot">
<kw name="Run Keywords" library="BuiltIn" type="SETUP">
<arg>Kill Web Application</arg>
<arg>AND</arg>
<arg>Replace Database With New Database Having Users</arg>
<arg>AND</arg>
<arg>Start Web Application With No Init Procedure</arg>
<arg>AND</arg>
<arg>Initialize Database Connection</arg>
<arg>AND</arg>
<arg>Verify Tables</arg>
<arg>AND</arg>
<arg>Fetch All System Users From Db</arg>
<doc>Executes all the given keywords in a sequence.</doc>
<kw name="Kill Web Application" library="Common">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210729 08:04:58.366" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210729 08:04:58.377" level="INFO">${rc} = 0</msg>
<msg timestamp="20210729 08:04:58.377" level="INFO">${pids} = 9703</msg>
<status status="PASS" starttime="20210729 08:04:58.362" endtime="20210729 08:04:58.377"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:04:58.379" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210729 08:04:58.378" endtime="20210729 08:04:58.379"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:04:58.380" level="INFO">${pids} = ['9703']</msg>
<status status="PASS" starttime="20210729 08:04:58.379" endtime="20210729 08:04:58.380"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">9703</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:04:58.386" level="INFO">Running command 'kill 9703 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:04:58.381" endtime="20210729 08:04:58.386"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.380" endtime="20210729 08:04:58.386"/>
</iter>
<status status="PASS" starttime="20210729 08:04:58.380" endtime="20210729 08:04:58.386"/>
</for>
<status status="PASS" starttime="20210729 08:04:58.379" endtime="20210729 08:04:58.386"/>
</branch>
<status status="PASS" starttime="20210729 08:04:58.379" endtime="20210729 08:04:58.387"/>
</if>
<status status="PASS" starttime="20210729 08:04:58.362" endtime="20210729 08:04:58.387"/>
</kw>
<kw name="Replace Database With New Database Having Users" library="DbManager">
<kw name="Set Variable" library="BuiltIn">
<var>${source}</var>
<arg>${EXECDIR}${/}TestData${/}demo_app_with_users.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:58.388" level="INFO">${source} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:58.387" endtime="20210729 08:04:58.388"/>
</kw>
<kw name="Get Path To App Database" library="DbManager">
<var>${target}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:58.388" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210729 08:04:58.388" endtime="20210729 08:04:58.388"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210729 08:04:58.389" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210729 08:04:58.389" endtime="20210729 08:04:58.389"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:58.390" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:58.389" endtime="20210729 08:04:58.390"/>
</kw>
<msg timestamp="20210729 08:04:58.390" level="INFO">${target} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:58.388" endtime="20210729 08:04:58.390"/>
</kw>
<kw name="Run" library="OperatingSystem">
<arg>cp ${source} ${target}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:04:58.392" level="INFO">Running command 'cp /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:04:58.390" endtime="20210729 08:04:58.394"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.387" endtime="20210729 08:04:58.394"/>
</kw>
<kw name="Start Web Application With No Init Procedure" library="Common">
<kw name="Start Process" library="Process">
<arg>export FLASK_APP\=demo_app;flask run --host\=0.0.0.0 --port\=8080</arg>
<arg>shell=True</arg>
<arg>alias=flasky</arg>
<arg>cwd=${EXECDIR}${/}..${/}Flasky</arg>
<doc>Starts a new process on background.</doc>
<msg timestamp="20210729 08:04:58.395" level="INFO">Starting process:
export FLASK_APP=demo_app;flask run --host=0.0.0.0 --port=8080</msg>
<status status="PASS" starttime="20210729 08:04:58.395" endtime="20210729 08:04:58.403"/>
</kw>
<kw name="Sleep" library="BuiltIn">
<arg>1.5s</arg>
<doc>Pauses the test executed for the given time.</doc>
<msg timestamp="20210729 08:04:59.906" level="INFO">Slept 1 second 500 milliseconds</msg>
<status status="PASS" starttime="20210729 08:04:58.404" endtime="20210729 08:04:59.906"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.394" endtime="20210729 08:04:59.906"/>
</kw>
<kw name="Initialize Database Connection" library="DbManager">
<kw name="Get Path To App Database" library="DbManager">
<var>${path_to_database}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:59.907" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210729 08:04:59.907" endtime="20210729 08:04:59.907"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210729 08:04:59.908" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210729 08:04:59.907" endtime="20210729 08:04:59.908"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:04:59.908" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:59.908" endtime="20210729 08:04:59.908"/>
</kw>
<msg timestamp="20210729 08:04:59.908" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:04:59.907" endtime="20210729 08:04:59.908"/>
</kw>
<kw name="Connect To Database Using Custom Params" library="DatabaseLibrary">
<arg>sqlite3</arg>
<arg>database='${path_to_database}'</arg>
<doc>Loads the DB API 2.0 module given `dbapiModuleName` then uses it to
connect to the database using the map string `db_custom_param_string`.</doc>
<msg timestamp="20210729 08:04:59.909" level="INFO">Executing : Connect To Database Using Custom Params : sqlite3.connect(db_api_2.connect(database='/home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite')) </msg>
<status status="PASS" starttime="20210729 08:04:59.909" endtime="20210729 08:04:59.909"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.906" endtime="20210729 08:04:59.909"/>
</kw>
<kw name="Verify Tables" library="DbManager">
<kw name="Table Must Exist" library="DatabaseLibrary">
<arg>user</arg>
<doc>Check if the table given exists in the database. Set optional input `sansTran` to True to run command without an
explicit transaction commit or rollback.</doc>
<msg timestamp="20210729 08:04:59.910" level="INFO">Executing : Table Must Exist  |  user </msg>
<msg timestamp="20210729 08:04:59.910" level="INFO">Executing : Row Count  |  SELECT name FROM sqlite_master WHERE type='table' AND name='user' COLLATE NOCASE </msg>
<status status="PASS" starttime="20210729 08:04:59.910" endtime="20210729 08:04:59.910"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.909" endtime="20210729 08:04:59.910"/>
</kw>
<kw name="Fetch All System Users From Db" library="DbManager">
<kw name="Query" library="DatabaseLibrary">
<var>${users}</var>
<arg>${QUERY_ALL_USERS}</arg>
<doc>Uses the input `selectStatement` to query for the values that will be returned as a list of tuples. Set optional
input `sansTran` to True to run command without an explicit transaction commit or rollback.
Set optional input `returnAsDict` to True to return values as a list of dictionaries.</doc>
<msg timestamp="20210729 08:04:59.910" level="INFO">Executing : Query  |  select username, firstname, lastname, phone, token from user; </msg>
<msg timestamp="20210729 08:04:59.910" level="INFO">${users} = [('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'), ('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTU...</msg>
<status status="PASS" starttime="20210729 08:04:59.910" endtime="20210729 08:04:59.910"/>
</kw>
<kw name="Create List" library="BuiltIn">
<var>${SYSTEM_USERS}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210729 08:04:59.911" level="INFO">${SYSTEM_USERS} = []</msg>
<status status="PASS" starttime="20210729 08:04:59.911" endtime="20210729 08:04:59.911"/>
</kw>
<for flavor="IN">
<var>${user}</var>
<value>@{users}</value>
<iter>
<var name="${user}">('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.911" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:04:59.911" endtime="20210729 08:04:59.911"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.911" endtime="20210729 08:04:59.912"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:59.912" endtime="20210729 08:04:59.912"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.911" endtime="20210729 08:04:59.912"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.913" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:04:59.912" endtime="20210729 08:04:59.913"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.913" endtime="20210729 08:04:59.913"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:59.913" endtime="20210729 08:04:59.914"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.912" endtime="20210729 08:04:59.914"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser3', 'John', 'Brown', '0508094677', 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.914" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:04:59.914" endtime="20210729 08:04:59.914"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.914" endtime="20210729 08:04:59.915"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:04:59.915" endtime="20210729 08:04:59.915"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.914" endtime="20210729 08:04:59.915"/>
</iter>
<status status="PASS" starttime="20210729 08:04:59.911" endtime="20210729 08:04:59.915"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>@{SYSTEM_USERS}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210729 08:04:59.915" level="INFO">@{SYSTEM_USERS} = [ {'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'} | {'username': 'SuperDuperUser2', 'f...</msg>
<status status="PASS" starttime="20210729 08:04:59.915" endtime="20210729 08:04:59.915"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.910" endtime="20210729 08:04:59.916"/>
</kw>
<status status="PASS" starttime="20210729 08:04:58.362" endtime="20210729 08:04:59.916"/>
</kw>
<test id="s1-s2-t1" name="Fetching Personal Info Of System Users Without Token, API User Gets Error">
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="When Fetching Personal Info Of A System User Without A Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>If API user does not provide any Token in headers when making a GET request to /api/users/{username}
then user is supposed to get an error in the following form in the response body:
{
"message": "Token authentication required",
"status": "FAILURE"
}
This test case check that the message &amp; the status returned are correct</doc>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.922" level="INFO">${response} = {'message': 'Token authentication required', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210729 08:04:59.917" endtime="20210729 08:04:59.922"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.922" endtime="20210729 08:04:59.922"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Token authentication required</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.922" endtime="20210729 08:04:59.923"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.917" endtime="20210729 08:04:59.923"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.916" endtime="20210729 08:04:59.923"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="When Fetching Personal Info Of A System User Without A Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>If API user does not provide any Token in headers when making a GET request to /api/users/{username}
then user is supposed to get an error in the following form in the response body:
{
"message": "Token authentication required",
"status": "FAILURE"
}
This test case check that the message &amp; the status returned are correct</doc>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.926" level="INFO">${response} = {'message': 'Token authentication required', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210729 08:04:59.923" endtime="20210729 08:04:59.927"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.927" endtime="20210729 08:04:59.930"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Token authentication required</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.931" endtime="20210729 08:04:59.931"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.923" endtime="20210729 08:04:59.931"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.923" endtime="20210729 08:04:59.931"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="When Fetching Personal Info Of A System User Without A Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>If API user does not provide any Token in headers when making a GET request to /api/users/{username}
then user is supposed to get an error in the following form in the response body:
{
"message": "Token authentication required",
"status": "FAILURE"
}
This test case check that the message &amp; the status returned are correct</doc>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.936" level="INFO">${response} = {'message': 'Token authentication required', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210729 08:04:59.932" endtime="20210729 08:04:59.936"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.937" endtime="20210729 08:04:59.937"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Token authentication required</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.937" endtime="20210729 08:04:59.937"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.931" endtime="20210729 08:04:59.937"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.931" endtime="20210729 08:04:59.937"/>
</iter>
<status status="PASS" starttime="20210729 08:04:59.916" endtime="20210729 08:04:59.937"/>
</for>
<doc>If a 3.rd party unknown user, who is not a system user with a valid token,
attempts to read personal information of system users without a token, then he will get an error.
The unknown user will receive the error regardless of which system user he queries.</doc>
<status status="PASS" starttime="20210729 08:04:59.916" endtime="20210729 08:04:59.938"/>
</test>
<test id="s1-s2-t2" name="Fetching Personal Info Of System Users With Invalid Token, API User Gets Error">
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="When Fetching Personal Info Of A System User With Invalid Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>Given an invalid token, when reading personal information of a system user
via GET request to /api/users/{username}, the api
must return the following in its response body:
{
"message": "Invalid Token",
"status": "FAILURE"
}</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.939" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210729 08:04:59.939" endtime="20210729 08:04:59.939"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.943" level="INFO">${response} = {'message': 'Invalid Token', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210729 08:04:59.939" endtime="20210729 08:04:59.943"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.943" endtime="20210729 08:04:59.943"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Invalid Token</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.943" endtime="20210729 08:04:59.944"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.938" endtime="20210729 08:04:59.944"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.938" endtime="20210729 08:04:59.944"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="When Fetching Personal Info Of A System User With Invalid Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>Given an invalid token, when reading personal information of a system user
via GET request to /api/users/{username}, the api
must return the following in its response body:
{
"message": "Invalid Token",
"status": "FAILURE"
}</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.945" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210729 08:04:59.944" endtime="20210729 08:04:59.945"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.949" level="INFO">${response} = {'message': 'Invalid Token', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210729 08:04:59.945" endtime="20210729 08:04:59.949"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.949" endtime="20210729 08:04:59.950"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Invalid Token</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.950" endtime="20210729 08:04:59.950"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.944" endtime="20210729 08:04:59.950"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.944" endtime="20210729 08:04:59.950"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="When Fetching Personal Info Of A System User With Invalid Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>Given an invalid token, when reading personal information of a system user
via GET request to /api/users/{username}, the api
must return the following in its response body:
{
"message": "Invalid Token",
"status": "FAILURE"
}</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.952" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210729 08:04:59.951" endtime="20210729 08:04:59.952"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.955" level="INFO">${response} = {'message': 'Invalid Token', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210729 08:04:59.952" endtime="20210729 08:04:59.955"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.956" endtime="20210729 08:04:59.956"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Invalid Token</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.956" endtime="20210729 08:04:59.956"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.951" endtime="20210729 08:04:59.956"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.951" endtime="20210729 08:04:59.956"/>
</iter>
<status status="PASS" starttime="20210729 08:04:59.938" endtime="20210729 08:04:59.956"/>
</for>
<doc>If a 3.rd party unknown user, who is not a system user with a valid token,
attempts to read personal information of system users with an invalid token, then he will get an error.
The unknown user will receive the error regardless of which system user he queries.</doc>
<status status="PASS" starttime="20210729 08:04:59.938" endtime="20210729 08:04:59.957"/>
</test>
<test id="s1-s2-t3" name="Fetching Personal Info Of System User With Valid Token, API User Indeed Gets The Personal Info Of That System User">
<for flavor="IN">
<var>${api_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="Any API User With A Valid Token Can Fetch Personal Info Of All System Users">
<arg>${api_user}</arg>
<doc>Given an api_user example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
We use the token of api_user as a request header.
We pick a system_user from SYSTEM_USERS in each FOR loop iteration.
And we query the personal information of that particular system_user using the api_user's token
Imagine we have three system users X, Y, Z. If api_user is X, then he can query the personal info of X, Y, Z
with his token using this keyword.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.958" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210729 08:04:59.958" endtime="20210729 08:04:59.958"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.962" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:59.959" endtime="20210729 08:04:59.962"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.963" endtime="20210729 08:04:59.963"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.963" endtime="20210729 08:04:59.963"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.963" endtime="20210729 08:04:59.964"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.964" endtime="20210729 08:04:59.964"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.964" endtime="20210729 08:04:59.964"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.964" endtime="20210729 08:04:59.965"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.965" endtime="20210729 08:04:59.965"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.962" endtime="20210729 08:04:59.965"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.959" endtime="20210729 08:04:59.965"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.970" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:59.965" endtime="20210729 08:04:59.970"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.971" endtime="20210729 08:04:59.971"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.971" endtime="20210729 08:04:59.971"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.972" endtime="20210729 08:04:59.972"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.972" endtime="20210729 08:04:59.972"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.972" endtime="20210729 08:04:59.973"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.973" endtime="20210729 08:04:59.973"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.973" endtime="20210729 08:04:59.973"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.970" endtime="20210729 08:04:59.973"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.965" endtime="20210729 08:04:59.973"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.977" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:59.973" endtime="20210729 08:04:59.977"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.978" endtime="20210729 08:04:59.978"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.978" endtime="20210729 08:04:59.978"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.978" endtime="20210729 08:04:59.979"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.979" endtime="20210729 08:04:59.979"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.979" endtime="20210729 08:04:59.979"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.979" endtime="20210729 08:04:59.980"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.980" endtime="20210729 08:04:59.980"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.977" endtime="20210729 08:04:59.980"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.973" endtime="20210729 08:04:59.980"/>
</iter>
<status status="PASS" starttime="20210729 08:04:59.958" endtime="20210729 08:04:59.980"/>
</for>
<status status="PASS" starttime="20210729 08:04:59.957" endtime="20210729 08:04:59.980"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.957" endtime="20210729 08:04:59.980"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="Any API User With A Valid Token Can Fetch Personal Info Of All System Users">
<arg>${api_user}</arg>
<doc>Given an api_user example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
We use the token of api_user as a request header.
We pick a system_user from SYSTEM_USERS in each FOR loop iteration.
And we query the personal information of that particular system_user using the api_user's token
Imagine we have three system users X, Y, Z. If api_user is X, then he can query the personal info of X, Y, Z
with his token using this keyword.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:04:59.981" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210729 08:04:59.981" endtime="20210729 08:04:59.981"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.985" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:59.981" endtime="20210729 08:04:59.985"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.986" endtime="20210729 08:04:59.986"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.986" endtime="20210729 08:04:59.986"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.987" endtime="20210729 08:04:59.987"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.987" endtime="20210729 08:04:59.987"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.987" endtime="20210729 08:04:59.988"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.988" endtime="20210729 08:04:59.988"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.988" endtime="20210729 08:04:59.988"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.985" endtime="20210729 08:04:59.988"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.981" endtime="20210729 08:04:59.988"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:04:59.993" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:59.989" endtime="20210729 08:04:59.993"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.994" endtime="20210729 08:04:59.994"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.994" endtime="20210729 08:04:59.994"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.994" endtime="20210729 08:04:59.995"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.995" endtime="20210729 08:04:59.995"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:04:59.995" endtime="20210729 08:04:59.996"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.996" endtime="20210729 08:04:59.996"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:04:59.996" endtime="20210729 08:04:59.997"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.993" endtime="20210729 08:04:59.997"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.989" endtime="20210729 08:04:59.997"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:05:00.003" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:04:59.997" endtime="20210729 08:05:00.003"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.003" endtime="20210729 08:05:00.004"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.004" endtime="20210729 08:05:00.004"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.004" endtime="20210729 08:05:00.004"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.005" endtime="20210729 08:05:00.005"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.005" endtime="20210729 08:05:00.005"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.005" endtime="20210729 08:05:00.005"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.006" endtime="20210729 08:05:00.006"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.003" endtime="20210729 08:05:00.006"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.997" endtime="20210729 08:05:00.006"/>
</iter>
<status status="PASS" starttime="20210729 08:04:59.981" endtime="20210729 08:05:00.006"/>
</for>
<status status="PASS" starttime="20210729 08:04:59.980" endtime="20210729 08:05:00.006"/>
</kw>
<status status="PASS" starttime="20210729 08:04:59.980" endtime="20210729 08:05:00.006"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="Any API User With A Valid Token Can Fetch Personal Info Of All System Users">
<arg>${api_user}</arg>
<doc>Given an api_user example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
We use the token of api_user as a request header.
We pick a system_user from SYSTEM_USERS in each FOR loop iteration.
And we query the personal information of that particular system_user using the api_user's token
Imagine we have three system users X, Y, Z. If api_user is X, then he can query the personal info of X, Y, Z
with his token using this keyword.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:00.007" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210729 08:05:00.007" endtime="20210729 08:05:00.007"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:05:00.011" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:05:00.007" endtime="20210729 08:05:00.011"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.012" endtime="20210729 08:05:00.012"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.012" endtime="20210729 08:05:00.012"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.012" endtime="20210729 08:05:00.013"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.013" endtime="20210729 08:05:00.013"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.013" endtime="20210729 08:05:00.013"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.013" endtime="20210729 08:05:00.014"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.014" endtime="20210729 08:05:00.014"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.011" endtime="20210729 08:05:00.014"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.007" endtime="20210729 08:05:00.014"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:05:00.018" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:05:00.014" endtime="20210729 08:05:00.018"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.019" endtime="20210729 08:05:00.019"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.019" endtime="20210729 08:05:00.019"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.019" endtime="20210729 08:05:00.020"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.020" endtime="20210729 08:05:00.020"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.020" endtime="20210729 08:05:00.020"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.020" endtime="20210729 08:05:00.021"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.021" endtime="20210729 08:05:00.021"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.018" endtime="20210729 08:05:00.021"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.014" endtime="20210729 08:05:00.021"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:05:00.025" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210729 08:05:00.021" endtime="20210729 08:05:00.025"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.026" endtime="20210729 08:05:00.026"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.026" endtime="20210729 08:05:00.026"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.026" endtime="20210729 08:05:00.027"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.027" endtime="20210729 08:05:00.027"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210729 08:05:00.027" endtime="20210729 08:05:00.028"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.028" endtime="20210729 08:05:00.028"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:00.028" endtime="20210729 08:05:00.028"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.025" endtime="20210729 08:05:00.028"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.021" endtime="20210729 08:05:00.028"/>
</iter>
<status status="PASS" starttime="20210729 08:05:00.007" endtime="20210729 08:05:00.028"/>
</for>
<status status="PASS" starttime="20210729 08:05:00.006" endtime="20210729 08:05:00.028"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.006" endtime="20210729 08:05:00.029"/>
</iter>
<status status="PASS" starttime="20210729 08:04:59.957" endtime="20210729 08:05:00.029"/>
</for>
<doc>Imagine we have three system users X, Y, Z. This test case checks that
X, Y, Z can query the personal info of X, Y, Z with a their own respective keys.</doc>
<status status="PASS" starttime="20210729 08:04:59.957" endtime="20210729 08:05:00.029"/>
</test>
<test id="s1-s2-t4" name="Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<for flavor="IN">
<var>${api_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="When Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:00.030" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210729 08:05:00.030" endtime="20210729 08:05:00.030"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/non-existing-user</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:05:00.042" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210729 08:05:00.043" level="FAIL">System under test has crashed with 5XX</msg>
<status status="FAIL" starttime="20210729 08:05:00.031" endtime="20210729 08:05:00.043"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210729 08:05:00.043" endtime="20210729 08:05:00.043"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>user does not exist</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210729 08:05:00.043" endtime="20210729 08:05:00.043"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:00.030" endtime="20210729 08:05:00.044"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:00.030" endtime="20210729 08:05:00.044"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="When Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:00.044" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210729 08:05:00.044" endtime="20210729 08:05:00.044"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/non-existing-user</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:05:00.048" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210729 08:05:00.048" level="FAIL">System under test has crashed with 5XX</msg>
<status status="FAIL" starttime="20210729 08:05:00.044" endtime="20210729 08:05:00.048"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210729 08:05:00.048" endtime="20210729 08:05:00.048"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>user does not exist</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210729 08:05:00.049" endtime="20210729 08:05:00.049"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:00.044" endtime="20210729 08:05:00.049"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:00.044" endtime="20210729 08:05:00.049"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="When Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:00.050" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210729 08:05:00.049" endtime="20210729 08:05:00.050"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/non-existing-user</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210729 08:05:00.054" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210729 08:05:00.054" level="FAIL">System under test has crashed with 5XX</msg>
<status status="FAIL" starttime="20210729 08:05:00.050" endtime="20210729 08:05:00.054"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210729 08:05:00.054" endtime="20210729 08:05:00.054"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>user does not exist</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210729 08:05:00.055" endtime="20210729 08:05:00.055"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:00.049" endtime="20210729 08:05:00.055"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:00.049" endtime="20210729 08:05:00.055"/>
</iter>
<status status="FAIL" starttime="20210729 08:05:00.029" endtime="20210729 08:05:00.055"/>
</for>
<doc>Imagine we have three system users X, Y, Z. Each of them wants to query personal
information of non-existing system user A. The system should return a response
having a message "user does not exist" with status FAILURE</doc>
<status status="FAIL" starttime="20210729 08:05:00.029" endtime="20210729 08:05:00.055">Several failures occurred:

1) System under test has crashed with 5XX

2) System under test has crashed with 5XX

3) System under test has crashed with 5XX</status>
</test>
<kw name="Kill Web Application" library="Common" type="TEARDOWN">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210729 08:05:00.059" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210729 08:05:00.066" level="INFO">${rc} = 0</msg>
<msg timestamp="20210729 08:05:00.066" level="INFO">${pids} = 9726
9733
9758</msg>
<status status="PASS" starttime="20210729 08:05:00.056" endtime="20210729 08:05:00.066"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:05:00.067" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210729 08:05:00.066" endtime="20210729 08:05:00.067"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:05:00.068" level="INFO">${pids} = ['9726', '9733', '9758']</msg>
<status status="PASS" starttime="20210729 08:05:00.068" endtime="20210729 08:05:00.068"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">9726</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:00.072" level="INFO">Running command 'kill 9726 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:00.069" endtime="20210729 08:05:00.072"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.069" endtime="20210729 08:05:00.072"/>
</iter>
<iter>
<var name="${pid}">9733</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:00.076" level="INFO">Running command 'kill 9733 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:00.072" endtime="20210729 08:05:00.078"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.072" endtime="20210729 08:05:00.078"/>
</iter>
<iter>
<var name="${pid}">9758</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:00.082" level="INFO">Running command 'kill 9758 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:00.078" endtime="20210729 08:05:00.082"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.078" endtime="20210729 08:05:00.082"/>
</iter>
<status status="PASS" starttime="20210729 08:05:00.068" endtime="20210729 08:05:00.082"/>
</for>
<status status="PASS" starttime="20210729 08:05:00.067" endtime="20210729 08:05:00.082"/>
</branch>
<status status="PASS" starttime="20210729 08:05:00.067" endtime="20210729 08:05:00.082"/>
</if>
<status status="PASS" starttime="20210729 08:05:00.056" endtime="20210729 08:05:00.083"/>
</kw>
<doc>This test suite contains test cases for CRF Demo API.
Documentation for the API can be found:
https://github.com/Interview-demoapp/Flasky
The acceptance criteria we verify here is
"2: As an API Consumer, if authenticated, I can get personal information of users"
Definitions
(1) System User: The user, who is registered to the system under test
(2) API User: The user, who calls the API to fetch personal information about the system user</doc>
<status status="FAIL" starttime="20210729 08:04:58.353" endtime="20210729 08:05:00.083"/>
</suite>
<suite id="s1-s3" name="3-Updating-Personal-Information" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API/3-Updating-Personal-Information.robot">
<test id="s1-s3-t1" name="With Any Valid Token, Updating Username Of Each System User With '' Results In &quot;Field update not allowed&quot;">
<kw name="Run Keywords" library="BuiltIn" type="SETUP">
<arg>Kill Web Application</arg>
<arg>AND</arg>
<arg>Replace Database With New Database Having Users</arg>
<arg>AND</arg>
<arg>Start Web Application With No Init Procedure</arg>
<arg>AND</arg>
<arg>Initialize Database Connection</arg>
<arg>AND</arg>
<arg>Verify Tables</arg>
<arg>AND</arg>
<arg>Fetch All System Users From Db</arg>
<doc>Executes all the given keywords in a sequence.</doc>
<kw name="Kill Web Application" library="Common">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210729 08:05:00.103" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210729 08:05:00.111" level="INFO">${rc} = 0</msg>
<msg timestamp="20210729 08:05:00.111" level="INFO">${pids} = 9787</msg>
<status status="PASS" starttime="20210729 08:05:00.099" endtime="20210729 08:05:00.111"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:05:00.112" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210729 08:05:00.111" endtime="20210729 08:05:00.112"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:05:00.112" level="INFO">${pids} = ['9787']</msg>
<status status="PASS" starttime="20210729 08:05:00.112" endtime="20210729 08:05:00.112"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">9787</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:00.115" level="INFO">Running command 'kill 9787 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:00.113" endtime="20210729 08:05:00.116"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.113" endtime="20210729 08:05:00.116"/>
</iter>
<status status="PASS" starttime="20210729 08:05:00.113" endtime="20210729 08:05:00.116"/>
</for>
<status status="PASS" starttime="20210729 08:05:00.112" endtime="20210729 08:05:00.116"/>
</branch>
<status status="PASS" starttime="20210729 08:05:00.112" endtime="20210729 08:05:00.116"/>
</if>
<status status="PASS" starttime="20210729 08:05:00.099" endtime="20210729 08:05:00.116"/>
</kw>
<kw name="Replace Database With New Database Having Users" library="DbManager">
<kw name="Set Variable" library="BuiltIn">
<var>${source}</var>
<arg>${EXECDIR}${/}TestData${/}demo_app_with_users.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:05:00.118" level="INFO">${source} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite</msg>
<status status="PASS" starttime="20210729 08:05:00.117" endtime="20210729 08:05:00.118"/>
</kw>
<kw name="Get Path To App Database" library="DbManager">
<var>${target}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:05:00.118" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210729 08:05:00.118" endtime="20210729 08:05:00.118"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210729 08:05:00.119" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210729 08:05:00.119" endtime="20210729 08:05:00.119"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:05:00.120" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:05:00.119" endtime="20210729 08:05:00.120"/>
</kw>
<msg timestamp="20210729 08:05:00.120" level="INFO">${target} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:05:00.118" endtime="20210729 08:05:00.120"/>
</kw>
<kw name="Run" library="OperatingSystem">
<arg>cp ${source} ${target}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:00.127" level="INFO">Running command 'cp /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:00.120" endtime="20210729 08:05:00.129"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.116" endtime="20210729 08:05:00.129"/>
</kw>
<kw name="Start Web Application With No Init Procedure" library="Common">
<kw name="Start Process" library="Process">
<arg>export FLASK_APP\=demo_app;flask run --host\=0.0.0.0 --port\=8080</arg>
<arg>shell=True</arg>
<arg>alias=flasky</arg>
<arg>cwd=${EXECDIR}${/}..${/}Flasky</arg>
<doc>Starts a new process on background.</doc>
<msg timestamp="20210729 08:05:00.130" level="INFO">Starting process:
export FLASK_APP=demo_app;flask run --host=0.0.0.0 --port=8080</msg>
<status status="PASS" starttime="20210729 08:05:00.130" endtime="20210729 08:05:00.135"/>
</kw>
<kw name="Sleep" library="BuiltIn">
<arg>1.5s</arg>
<doc>Pauses the test executed for the given time.</doc>
<msg timestamp="20210729 08:05:01.644" level="INFO">Slept 1 second 500 milliseconds</msg>
<status status="PASS" starttime="20210729 08:05:00.135" endtime="20210729 08:05:01.644"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.130" endtime="20210729 08:05:01.644"/>
</kw>
<kw name="Initialize Database Connection" library="DbManager">
<kw name="Get Path To App Database" library="DbManager">
<var>${path_to_database}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:05:01.646" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210729 08:05:01.645" endtime="20210729 08:05:01.646"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210729 08:05:01.646" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210729 08:05:01.646" endtime="20210729 08:05:01.646"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210729 08:05:01.647" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:05:01.646" endtime="20210729 08:05:01.647"/>
</kw>
<msg timestamp="20210729 08:05:01.647" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210729 08:05:01.645" endtime="20210729 08:05:01.647"/>
</kw>
<kw name="Connect To Database Using Custom Params" library="DatabaseLibrary">
<arg>sqlite3</arg>
<arg>database='${path_to_database}'</arg>
<doc>Loads the DB API 2.0 module given `dbapiModuleName` then uses it to
connect to the database using the map string `db_custom_param_string`.</doc>
<msg timestamp="20210729 08:05:01.647" level="INFO">Executing : Connect To Database Using Custom Params : sqlite3.connect(db_api_2.connect(database='/home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite')) </msg>
<status status="PASS" starttime="20210729 08:05:01.647" endtime="20210729 08:05:01.647"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.644" endtime="20210729 08:05:01.648"/>
</kw>
<kw name="Verify Tables" library="DbManager">
<kw name="Table Must Exist" library="DatabaseLibrary">
<arg>user</arg>
<doc>Check if the table given exists in the database. Set optional input `sansTran` to True to run command without an
explicit transaction commit or rollback.</doc>
<msg timestamp="20210729 08:05:01.648" level="INFO">Executing : Table Must Exist  |  user </msg>
<msg timestamp="20210729 08:05:01.648" level="INFO">Executing : Row Count  |  SELECT name FROM sqlite_master WHERE type='table' AND name='user' COLLATE NOCASE </msg>
<status status="PASS" starttime="20210729 08:05:01.648" endtime="20210729 08:05:01.648"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.648" endtime="20210729 08:05:01.649"/>
</kw>
<kw name="Fetch All System Users From Db" library="DbManager">
<kw name="Query" library="DatabaseLibrary">
<var>${users}</var>
<arg>${QUERY_ALL_USERS}</arg>
<doc>Uses the input `selectStatement` to query for the values that will be returned as a list of tuples. Set optional
input `sansTran` to True to run command without an explicit transaction commit or rollback.
Set optional input `returnAsDict` to True to return values as a list of dictionaries.</doc>
<msg timestamp="20210729 08:05:01.649" level="INFO">Executing : Query  |  select username, firstname, lastname, phone, token from user; </msg>
<msg timestamp="20210729 08:05:01.649" level="INFO">${users} = [('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'), ('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTU...</msg>
<status status="PASS" starttime="20210729 08:05:01.649" endtime="20210729 08:05:01.649"/>
</kw>
<kw name="Create List" library="BuiltIn">
<var>${SYSTEM_USERS}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210729 08:05:01.650" level="INFO">${SYSTEM_USERS} = []</msg>
<status status="PASS" starttime="20210729 08:05:01.650" endtime="20210729 08:05:01.650"/>
</kw>
<for flavor="IN">
<var>${user}</var>
<value>@{users}</value>
<iter>
<var name="${user}">('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.651" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:05:01.650" endtime="20210729 08:05:01.651"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:01.651" endtime="20210729 08:05:01.651"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:05:01.651" endtime="20210729 08:05:01.652"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.650" endtime="20210729 08:05:01.652"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.652" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:05:01.652" endtime="20210729 08:05:01.652"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:01.652" endtime="20210729 08:05:01.653"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:05:01.653" endtime="20210729 08:05:01.653"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.652" endtime="20210729 08:05:01.653"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser3', 'John', 'Brown', '0508094677', 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.654" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210729 08:05:01.653" endtime="20210729 08:05:01.654"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210729 08:05:01.654" endtime="20210729 08:05:01.654"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210729 08:05:01.654" endtime="20210729 08:05:01.655"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.653" endtime="20210729 08:05:01.655"/>
</iter>
<status status="PASS" starttime="20210729 08:05:01.650" endtime="20210729 08:05:01.655"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>@{SYSTEM_USERS}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210729 08:05:01.655" level="INFO">@{SYSTEM_USERS} = [ {'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'} | {'username': 'SuperDuperUser2', 'f...</msg>
<status status="PASS" starttime="20210729 08:05:01.655" endtime="20210729 08:05:01.655"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.649" endtime="20210729 08:05:01.655"/>
</kw>
<status status="PASS" starttime="20210729 08:05:00.098" endtime="20210729 08:05:01.655"/>
</kw>
<for flavor="IN">
<var>${api_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="With Valid Token, Attempt to Set Username To All System Users">
<arg>token=${api_user}[token]</arg>
<arg>username_value=${EMPTY}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${token}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.657" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210729 08:05:01.656" endtime="20210729 08:05:01.657"/>
</kw>
<kw name="Create Dictionary" library="BuiltIn">
<var>${payload}</var>
<arg>username=${username_value}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.657" level="INFO">${payload} = {'username': ''}</msg>
<status status="PASS" starttime="20210729 08:05:01.657" endtime="20210729 08:05:01.657"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="PUT" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<arg>body=${payload}</arg>
<doc>Sends a PUT request to the endpoint.
    The endpoint is joined with the base_url given on library init.</doc>
<msg timestamp="20210729 08:05:01.670" level="INFO">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210729 08:05:01.671" level="FAIL">We expected a JSON, but received text/html</msg>
<status status="FAIL" starttime="20210729 08:05:01.657" endtime="20210729 08:05:01.671"/>
</kw>
<kw name="Verify Response">
<arg>${response}</arg>
<arg>message=Field update not allowed</arg>
<arg>status=FAILURE</arg>
<status status="NOT RUN" starttime="20210729 08:05:01.671" endtime="20210729 08:05:01.671"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:01.657" endtime="20210729 08:05:01.671"/>
</iter>
<status status="FAIL" starttime="20210729 08:05:01.657" endtime="20210729 08:05:01.671"/>
</for>
<status status="FAIL" starttime="20210729 08:05:01.656" endtime="20210729 08:05:01.671"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:01.656" endtime="20210729 08:05:01.671"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="With Valid Token, Attempt to Set Username To All System Users">
<arg>token=${api_user}[token]</arg>
<arg>username_value=${EMPTY}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${token}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.673" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210729 08:05:01.672" endtime="20210729 08:05:01.673"/>
</kw>
<kw name="Create Dictionary" library="BuiltIn">
<var>${payload}</var>
<arg>username=${username_value}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.673" level="INFO">${payload} = {'username': ''}</msg>
<status status="PASS" starttime="20210729 08:05:01.673" endtime="20210729 08:05:01.673"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="PUT" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<arg>body=${payload}</arg>
<doc>Sends a PUT request to the endpoint.
    The endpoint is joined with the base_url given on library init.</doc>
<msg timestamp="20210729 08:05:01.677" level="INFO">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210729 08:05:01.677" level="FAIL">We expected a JSON, but received text/html</msg>
<status status="FAIL" starttime="20210729 08:05:01.673" endtime="20210729 08:05:01.677"/>
</kw>
<kw name="Verify Response">
<arg>${response}</arg>
<arg>message=Field update not allowed</arg>
<arg>status=FAILURE</arg>
<status status="NOT RUN" starttime="20210729 08:05:01.677" endtime="20210729 08:05:01.677"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:01.673" endtime="20210729 08:05:01.677"/>
</iter>
<status status="FAIL" starttime="20210729 08:05:01.673" endtime="20210729 08:05:01.677"/>
</for>
<status status="FAIL" starttime="20210729 08:05:01.672" endtime="20210729 08:05:01.677"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:01.671" endtime="20210729 08:05:01.677"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="With Valid Token, Attempt to Set Username To All System Users">
<arg>token=${api_user}[token]</arg>
<arg>username_value=${EMPTY}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${token}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.679" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210729 08:05:01.679" endtime="20210729 08:05:01.679"/>
</kw>
<kw name="Create Dictionary" library="BuiltIn">
<var>${payload}</var>
<arg>username=${username_value}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210729 08:05:01.679" level="INFO">${payload} = {'username': ''}</msg>
<status status="PASS" starttime="20210729 08:05:01.679" endtime="20210729 08:05:01.679"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="PUT" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<arg>body=${payload}</arg>
<doc>Sends a PUT request to the endpoint.
    The endpoint is joined with the base_url given on library init.</doc>
<msg timestamp="20210729 08:05:01.684" level="INFO">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210729 08:05:01.685" level="FAIL">We expected a JSON, but received text/html</msg>
<status status="FAIL" starttime="20210729 08:05:01.680" endtime="20210729 08:05:01.685"/>
</kw>
<kw name="Verify Response">
<arg>${response}</arg>
<arg>message=Field update not allowed</arg>
<arg>status=FAILURE</arg>
<status status="NOT RUN" starttime="20210729 08:05:01.685" endtime="20210729 08:05:01.685"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:01.679" endtime="20210729 08:05:01.685"/>
</iter>
<status status="FAIL" starttime="20210729 08:05:01.679" endtime="20210729 08:05:01.685"/>
</for>
<status status="FAIL" starttime="20210729 08:05:01.678" endtime="20210729 08:05:01.685"/>
</kw>
<status status="FAIL" starttime="20210729 08:05:01.678" endtime="20210729 08:05:01.685"/>
</iter>
<status status="FAIL" starttime="20210729 08:05:01.655" endtime="20210729 08:05:01.685"/>
</for>
<kw name="Kill Web Application" library="Common" type="TEARDOWN">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210729 08:05:01.692" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210729 08:05:01.701" level="INFO">${rc} = 0</msg>
<msg timestamp="20210729 08:05:01.701" level="INFO">${pids} = 9810
9817
9825</msg>
<status status="PASS" starttime="20210729 08:05:01.686" endtime="20210729 08:05:01.701"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:05:01.702" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210729 08:05:01.701" endtime="20210729 08:05:01.702"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210729 08:05:01.702" level="INFO">${pids} = ['9810', '9817', '9825']</msg>
<status status="PASS" starttime="20210729 08:05:01.702" endtime="20210729 08:05:01.702"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">9810</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:01.706" level="INFO">Running command 'kill 9810 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:01.703" endtime="20210729 08:05:01.706"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.703" endtime="20210729 08:05:01.706"/>
</iter>
<iter>
<var name="${pid}">9817</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:01.709" level="INFO">Running command 'kill 9817 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:01.706" endtime="20210729 08:05:01.709"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.706" endtime="20210729 08:05:01.709"/>
</iter>
<iter>
<var name="${pid}">9825</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210729 08:05:01.712" level="INFO">Running command 'kill 9825 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210729 08:05:01.710" endtime="20210729 08:05:01.712"/>
</kw>
<status status="PASS" starttime="20210729 08:05:01.710" endtime="20210729 08:05:01.712"/>
</iter>
<status status="PASS" starttime="20210729 08:05:01.702" endtime="20210729 08:05:01.712"/>
</for>
<status status="PASS" starttime="20210729 08:05:01.702" endtime="20210729 08:05:01.712"/>
</branch>
<status status="PASS" starttime="20210729 08:05:01.702" endtime="20210729 08:05:01.712"/>
</if>
<status status="PASS" starttime="20210729 08:05:01.686" endtime="20210729 08:05:01.713"/>
</kw>
<doc>Imagine we have three system users X, Y, Z. We make PUT requests to /api/users/&lt;username&gt;
where &lt;username&gt; is any registered user's username. In the requests' body, we set an empty
username as such:
{
"username": ''
}
Then, Each time, the request should fail each time with the following response body:
{
"message": "Field update not allowed",
"status": "FAILURE"
}</doc>
<status status="FAIL" starttime="20210729 08:05:00.097" endtime="20210729 08:05:01.713">Several failures occurred:

1) We expected a JSON, but received text/html

2) We expected a JSON, but received text/html

3) We expected a JSON, but received text/html</status>
</test>
<doc>This test suite contains test cases for CRF Demo API.
Documentation for the API can be found:
https://github.com/Interview-demoapp/Flasky
The acceptance criteria we verify here is
"3: As an API Consumer, if authenticated, I can update personal information of users"
Definitions
(1) System User: The user, who is registered to the system under test
(2) API User: The user, who calls the API to update personal information of the system user</doc>
<status status="FAIL" starttime="20210729 08:05:00.087" endtime="20210729 08:05:01.714"/>
</suite>
<status status="FAIL" starttime="20210729 08:04:56.094" endtime="20210729 08:05:01.719"/>
</suite>
<statistics>
<total>
<stat pass="4" fail="4" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="4" fail="4" skip="0" id="s1" name="API">API</stat>
<stat pass="1" fail="2" skip="0" id="s1-s1" name="1-Reviewing-Users">API.1-Reviewing-Users</stat>
<stat pass="3" fail="1" skip="0" id="s1-s2" name="2-Getting-Personal-Information">API.2-Getting-Personal-Information</stat>
<stat pass="0" fail="1" skip="0" id="s1-s3" name="3-Updating-Personal-Information">API.3-Updating-Personal-Information</stat>
</suite>
</statistics>
<errors>
<msg timestamp="20210729 08:05:00.042" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210729 08:05:00.048" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210729 08:05:00.054" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
</errors>
</robot>
