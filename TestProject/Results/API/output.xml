<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 4.0.3 (Python 3.7.4 on linux)" generated="20210728 17:59:20.947" rpa="false" schemaversion="2">
<suite id="s1" name="API" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API">
<suite id="s1-s1" name="1-Reviewing-Users" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API/1-Reviewing-Users.robot">
<kw name="Run Keywords" library="BuiltIn" type="SETUP">
<arg>Kill Web Application</arg>
<arg>AND</arg>
<arg>Replace Database With New Database Having Users</arg>
<arg>AND</arg>
<arg>Start Web Application With No Init Procedure</arg>
<arg>AND</arg>
<arg>Initialize Database Connection</arg>
<arg>AND</arg>
<arg>Verify Tables</arg>
<arg>AND</arg>
<arg>Fetch All System Users From Db</arg>
<arg>AND</arg>
<arg>Filter System Users By</arg>
<arg>username</arg>
<arg>\${SYSTEM_USERS_USERNAMES}</arg>
<doc>Executes all the given keywords in a sequence.</doc>
<kw name="Kill Web Application" library="Common">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210728 17:59:21.980" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210728 17:59:21.995" level="INFO">${rc} = 0</msg>
<msg timestamp="20210728 17:59:21.995" level="INFO">${pids} = 27257</msg>
<status status="PASS" starttime="20210728 17:59:21.976" endtime="20210728 17:59:21.995"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:22.000" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210728 17:59:21.996" endtime="20210728 17:59:22.000"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:22.001" level="INFO">${pids} = ['27257']</msg>
<status status="PASS" starttime="20210728 17:59:22.000" endtime="20210728 17:59:22.001"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">27257</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:22.005" level="INFO">Running command 'kill 27257 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:22.001" endtime="20210728 17:59:22.005"/>
</kw>
<status status="PASS" starttime="20210728 17:59:22.001" endtime="20210728 17:59:22.005"/>
</iter>
<status status="PASS" starttime="20210728 17:59:22.001" endtime="20210728 17:59:22.005"/>
</for>
<status status="PASS" starttime="20210728 17:59:22.000" endtime="20210728 17:59:22.005"/>
</branch>
<status status="PASS" starttime="20210728 17:59:22.000" endtime="20210728 17:59:22.005"/>
</if>
<status status="PASS" starttime="20210728 17:59:21.975" endtime="20210728 17:59:22.006"/>
</kw>
<kw name="Replace Database With New Database Having Users" library="DbManager">
<kw name="Set Variable" library="BuiltIn">
<var>${source}</var>
<arg>${EXECDIR}${/}TestData${/}demo_app_with_users.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:22.007" level="INFO">${source} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:22.006" endtime="20210728 17:59:22.007"/>
</kw>
<kw name="Get Path To App Database" library="DbManager">
<var>${target}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:22.008" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210728 17:59:22.007" endtime="20210728 17:59:22.008"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210728 17:59:22.008" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210728 17:59:22.008" endtime="20210728 17:59:22.008"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:22.008" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:22.008" endtime="20210728 17:59:22.008"/>
</kw>
<msg timestamp="20210728 17:59:22.009" level="INFO">${target} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:22.007" endtime="20210728 17:59:22.009"/>
</kw>
<kw name="Run" library="OperatingSystem">
<arg>cp ${source} ${target}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:22.012" level="INFO">Running command 'cp /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:22.009" endtime="20210728 17:59:22.016"/>
</kw>
<status status="PASS" starttime="20210728 17:59:22.006" endtime="20210728 17:59:22.016"/>
</kw>
<kw name="Start Web Application With No Init Procedure" library="Common">
<kw name="Start Process" library="Process">
<arg>export FLASK_APP\=demo_app;flask run --host\=0.0.0.0 --port\=8080</arg>
<arg>shell=True</arg>
<arg>alias=flasky</arg>
<arg>cwd=${EXECDIR}${/}..${/}Flasky</arg>
<doc>Starts a new process on background.</doc>
<msg timestamp="20210728 17:59:22.018" level="INFO">Starting process:
export FLASK_APP=demo_app;flask run --host=0.0.0.0 --port=8080</msg>
<status status="PASS" starttime="20210728 17:59:22.017" endtime="20210728 17:59:22.022"/>
</kw>
<kw name="Sleep" library="BuiltIn">
<arg>1.5s</arg>
<doc>Pauses the test executed for the given time.</doc>
<msg timestamp="20210728 17:59:23.524" level="INFO">Slept 1 second 500 milliseconds</msg>
<status status="PASS" starttime="20210728 17:59:22.023" endtime="20210728 17:59:23.524"/>
</kw>
<status status="PASS" starttime="20210728 17:59:22.017" endtime="20210728 17:59:23.524"/>
</kw>
<kw name="Initialize Database Connection" library="DbManager">
<kw name="Get Path To App Database" library="DbManager">
<var>${path_to_database}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:23.525" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210728 17:59:23.525" endtime="20210728 17:59:23.525"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210728 17:59:23.526" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210728 17:59:23.525" endtime="20210728 17:59:23.526"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:23.526" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:23.526" endtime="20210728 17:59:23.526"/>
</kw>
<msg timestamp="20210728 17:59:23.526" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:23.525" endtime="20210728 17:59:23.526"/>
</kw>
<kw name="Connect To Database Using Custom Params" library="DatabaseLibrary">
<arg>sqlite3</arg>
<arg>database='${path_to_database}'</arg>
<doc>Loads the DB API 2.0 module given `dbapiModuleName` then uses it to
connect to the database using the map string `db_custom_param_string`.</doc>
<msg timestamp="20210728 17:59:23.528" level="INFO">Executing : Connect To Database Using Custom Params : sqlite3.connect(db_api_2.connect(database='/home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite')) </msg>
<status status="PASS" starttime="20210728 17:59:23.527" endtime="20210728 17:59:23.528"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.525" endtime="20210728 17:59:23.528"/>
</kw>
<kw name="Verify Tables" library="DbManager">
<kw name="Table Must Exist" library="DatabaseLibrary">
<arg>user</arg>
<doc>Check if the table given exists in the database. Set optional input `sansTran` to True to run command without an
explicit transaction commit or rollback.</doc>
<msg timestamp="20210728 17:59:23.529" level="INFO">Executing : Table Must Exist  |  user </msg>
<msg timestamp="20210728 17:59:23.529" level="INFO">Executing : Row Count  |  SELECT name FROM sqlite_master WHERE type='table' AND name='user' COLLATE NOCASE </msg>
<status status="PASS" starttime="20210728 17:59:23.529" endtime="20210728 17:59:23.529"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.528" endtime="20210728 17:59:23.529"/>
</kw>
<kw name="Fetch All System Users From Db" library="DbManager">
<kw name="Query" library="DatabaseLibrary">
<var>${users}</var>
<arg>${QUERY_ALL_USERS}</arg>
<doc>Uses the input `selectStatement` to query for the values that will be returned as a list of tuples. Set optional
input `sansTran` to True to run command without an explicit transaction commit or rollback.
Set optional input `returnAsDict` to True to return values as a list of dictionaries.</doc>
<msg timestamp="20210728 17:59:23.530" level="INFO">Executing : Query  |  select username, firstname, lastname, phone, token from user; </msg>
<msg timestamp="20210728 17:59:23.530" level="INFO">${users} = [('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'), ('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTU...</msg>
<status status="PASS" starttime="20210728 17:59:23.530" endtime="20210728 17:59:23.530"/>
</kw>
<kw name="Create List" library="BuiltIn">
<var>${SYSTEM_USERS}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210728 17:59:23.531" level="INFO">${SYSTEM_USERS} = []</msg>
<status status="PASS" starttime="20210728 17:59:23.531" endtime="20210728 17:59:23.531"/>
</kw>
<for flavor="IN">
<var>${user}</var>
<value>@{users}</value>
<iter>
<var name="${user}">('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:23.532" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:23.531" endtime="20210728 17:59:23.532"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:23.532" endtime="20210728 17:59:23.533"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:23.533" endtime="20210728 17:59:23.533"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.531" endtime="20210728 17:59:23.533"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:23.533" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:23.533" endtime="20210728 17:59:23.533"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:23.533" endtime="20210728 17:59:23.534"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:23.534" endtime="20210728 17:59:23.534"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.533" endtime="20210728 17:59:23.534"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser3', 'John', 'Brown', '0508094677', 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:23.535" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:23.534" endtime="20210728 17:59:23.535"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:23.535" endtime="20210728 17:59:23.535"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:23.536" endtime="20210728 17:59:23.536"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.534" endtime="20210728 17:59:23.536"/>
</iter>
<status status="PASS" starttime="20210728 17:59:23.531" endtime="20210728 17:59:23.536"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>@{SYSTEM_USERS}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210728 17:59:23.536" level="INFO">@{SYSTEM_USERS} = [ {'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'} | {'username': 'SuperDuperUser2', 'f...</msg>
<status status="PASS" starttime="20210728 17:59:23.536" endtime="20210728 17:59:23.536"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.529" endtime="20210728 17:59:23.536"/>
</kw>
<kw name="Filter System Users By">
<arg>username</arg>
<arg>\${SYSTEM_USERS_USERNAMES}</arg>
<doc>This keyword expects SYSTEM_USERS suite variable being present in the suite.
SYSTEM_USERS is a list of system users, each of which is a dictionary
An example of a system user:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
As you see, there are several keys such as username, firstname, lastname, phone and token.
This keyword filters by SYSTEM_USERS with a given key (e.g. username).
That is, all the usernames in SYSTEM_USERS are placed into a new list.
Then this keyword sets a suite variable with that new list. The name of the suite variable
is provided in DYNAMIC_VARIABLE_NAME variable.
Some example usages:
(1) gives all the usernames in SYSTEM_USERS_USERNAMES suite variable:
Filter System Users By username ${SYSTEM_USERS_USERNAMES}
(2) gives all lastnames in SYSTEM_USERS_LASTNAMES suite variable:
Filter System Users By lastname ${SYSTEM_USERS_LASTNAMES}</doc>
<kw name="Create List" library="BuiltIn">
<var>${list}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210728 17:59:23.537" level="INFO">${list} = []</msg>
<status status="PASS" starttime="20210728 17:59:23.537" endtime="20210728 17:59:23.537"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="Append To List" library="Collections">
<arg>${list}</arg>
<arg>${system_user}[${key}]</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:23.537" endtime="20210728 17:59:23.538"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.537" endtime="20210728 17:59:23.538"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="Append To List" library="Collections">
<arg>${list}</arg>
<arg>${system_user}[${key}]</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:23.538" endtime="20210728 17:59:23.538"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.538" endtime="20210728 17:59:23.538"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="Append To List" library="Collections">
<arg>${list}</arg>
<arg>${system_user}[${key}]</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:23.538" endtime="20210728 17:59:23.539"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.538" endtime="20210728 17:59:23.539"/>
</iter>
<status status="PASS" starttime="20210728 17:59:23.537" endtime="20210728 17:59:23.539"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${DYNAMIC_VARIABLE_NAME}</arg>
<arg>${list}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210728 17:59:23.539" level="INFO">${SYSTEM_USERS_USERNAMES} = ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3']</msg>
<status status="PASS" starttime="20210728 17:59:23.539" endtime="20210728 17:59:23.539"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.537" endtime="20210728 17:59:23.539"/>
</kw>
<status status="PASS" starttime="20210728 17:59:21.975" endtime="20210728 17:59:23.539"/>
</kw>
<test id="s1-s1-t1" name="With No Token, Reading Users From API Should Return Error">
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:23.547" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:23.540" endtime="20210728 17:59:23.547"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<msg timestamp="20210728 17:59:23.548" level="FAIL">SUCCESS != FAILURE</msg>
<status status="FAIL" starttime="20210728 17:59:23.548" endtime="20210728 17:59:23.548"/>
</kw>
<doc>Given no token, when reading usernames from API, the api
must return FAILURE in its response status</doc>
<status status="FAIL" starttime="20210728 17:59:23.540" endtime="20210728 17:59:23.548">SUCCESS != FAILURE</status>
</test>
<test id="s1-s1-t2" name="With Invalid Token, Reading Users From API Should Return Error">
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:23.550" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210728 17:59:23.549" endtime="20210728 17:59:23.550"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:23.554" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:23.550" endtime="20210728 17:59:23.554"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<msg timestamp="20210728 17:59:23.555" level="FAIL">SUCCESS != FAILURE</msg>
<status status="FAIL" starttime="20210728 17:59:23.554" endtime="20210728 17:59:23.555"/>
</kw>
<doc>Given an invalid token, when reading usernames from API, the api
must return FAILURE in its response status</doc>
<status status="FAIL" starttime="20210728 17:59:23.549" endtime="20210728 17:59:23.555">SUCCESS != FAILURE</status>
</test>
<test id="s1-s1-t3" name="With Valid Token, Reading Users From API Matches With Users From DB">
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="With Valid Token, Reading Users From API Should Return All System Users' Usernames">
<arg>${system_user}</arg>
<doc>The system_user parameter is a dictionary. An example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
This keyword uses the token of system_user to make a GET request.
It then expects that response status is SUCCESS and the response payload
contains usernames (i.e. SYSTEM_USERS_USERNAMES) read from the database.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${system_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:23.558" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210728 17:59:23.557" endtime="20210728 17:59:23.558"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:23.562" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:23.558" endtime="20210728 17:59:23.562"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:23.562" endtime="20210728 17:59:23.562"/>
</kw>
<kw name="Lists Should Be Equal" library="Collections">
<arg>${SYSTEM_USERS_USERNAMES}</arg>
<arg>${response}[payload]</arg>
<doc>Fails if given lists are unequal.</doc>
<status status="PASS" starttime="20210728 17:59:23.562" endtime="20210728 17:59:23.563"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.557" endtime="20210728 17:59:23.563"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.557" endtime="20210728 17:59:23.563"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="With Valid Token, Reading Users From API Should Return All System Users' Usernames">
<arg>${system_user}</arg>
<doc>The system_user parameter is a dictionary. An example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
This keyword uses the token of system_user to make a GET request.
It then expects that response status is SUCCESS and the response payload
contains usernames (i.e. SYSTEM_USERS_USERNAMES) read from the database.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${system_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:23.564" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210728 17:59:23.564" endtime="20210728 17:59:23.564"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:23.569" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:23.564" endtime="20210728 17:59:23.569"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:23.569" endtime="20210728 17:59:23.570"/>
</kw>
<kw name="Lists Should Be Equal" library="Collections">
<arg>${SYSTEM_USERS_USERNAMES}</arg>
<arg>${response}[payload]</arg>
<doc>Fails if given lists are unequal.</doc>
<status status="PASS" starttime="20210728 17:59:23.570" endtime="20210728 17:59:23.570"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.563" endtime="20210728 17:59:23.570"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.563" endtime="20210728 17:59:23.570"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="With Valid Token, Reading Users From API Should Return All System Users' Usernames">
<arg>${system_user}</arg>
<doc>The system_user parameter is a dictionary. An example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
This keyword uses the token of system_user to make a GET request.
It then expects that response status is SUCCESS and the response payload
contains usernames (i.e. SYSTEM_USERS_USERNAMES) read from the database.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${system_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:23.572" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210728 17:59:23.571" endtime="20210728 17:59:23.572"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:23.577" level="INFO">${response} = {'payload': ['SuperDuperUser1', 'SuperDuperUser2', 'SuperDuperUser3'], 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:23.572" endtime="20210728 17:59:23.577"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:23.578" endtime="20210728 17:59:23.578"/>
</kw>
<kw name="Lists Should Be Equal" library="Collections">
<arg>${SYSTEM_USERS_USERNAMES}</arg>
<arg>${response}[payload]</arg>
<doc>Fails if given lists are unequal.</doc>
<status status="PASS" starttime="20210728 17:59:23.578" endtime="20210728 17:59:23.579"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.571" endtime="20210728 17:59:23.579"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.571" endtime="20210728 17:59:23.579"/>
</iter>
<status status="PASS" starttime="20210728 17:59:23.556" endtime="20210728 17:59:23.579"/>
</for>
<doc>Valid token results in reading all users from the database regardless of the system_user
That is, as long as system_user has a valid token, it can retrive usernames from the API.</doc>
<status status="PASS" starttime="20210728 17:59:23.556" endtime="20210728 17:59:23.579"/>
</test>
<kw name="Kill Web Application" library="Common" type="TEARDOWN">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210728 17:59:23.591" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210728 17:59:23.603" level="INFO">${rc} = 0</msg>
<msg timestamp="20210728 17:59:23.603" level="INFO">${pids} = 27280
27287
27294</msg>
<status status="PASS" starttime="20210728 17:59:23.580" endtime="20210728 17:59:23.603"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:23.604" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210728 17:59:23.603" endtime="20210728 17:59:23.604"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:23.605" level="INFO">${pids} = ['27280', '27287', '27294']</msg>
<status status="PASS" starttime="20210728 17:59:23.605" endtime="20210728 17:59:23.605"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">27280</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:23.608" level="INFO">Running command 'kill 27280 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:23.606" endtime="20210728 17:59:23.608"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.605" endtime="20210728 17:59:23.609"/>
</iter>
<iter>
<var name="${pid}">27287</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:23.611" level="INFO">Running command 'kill 27287 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:23.609" endtime="20210728 17:59:23.611"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.609" endtime="20210728 17:59:23.612"/>
</iter>
<iter>
<var name="${pid}">27294</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:23.617" level="INFO">Running command 'kill 27294 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:23.612" endtime="20210728 17:59:23.617"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.612" endtime="20210728 17:59:23.617"/>
</iter>
<status status="PASS" starttime="20210728 17:59:23.605" endtime="20210728 17:59:23.617"/>
</for>
<status status="PASS" starttime="20210728 17:59:23.605" endtime="20210728 17:59:23.617"/>
</branch>
<status status="PASS" starttime="20210728 17:59:23.605" endtime="20210728 17:59:23.617"/>
</if>
<status status="PASS" starttime="20210728 17:59:23.580" endtime="20210728 17:59:23.618"/>
</kw>
<doc>This test suite contains test cases for CRF Demo API.
Documentation for the API can be found:
https://github.com/Interview-demoapp/Flasky
The acceptance criteria we verify here is
"1: As an API Consumer, I can review users registered in the system"
Definitions
(1) System User: The user, who is registered to the system under test
(2) API User: The user, who calls the API to fetch information (i.e. username) about the system user</doc>
<status status="FAIL" starttime="20210728 17:59:20.974" endtime="20210728 17:59:23.619"/>
</suite>
<suite id="s1-s2" name="2-Getting-Personal-Information" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API/2-Getting-Personal-Information.robot">
<kw name="Run Keywords" library="BuiltIn" type="SETUP">
<arg>Kill Web Application</arg>
<arg>AND</arg>
<arg>Replace Database With New Database Having Users</arg>
<arg>AND</arg>
<arg>Start Web Application With No Init Procedure</arg>
<arg>AND</arg>
<arg>Initialize Database Connection</arg>
<arg>AND</arg>
<arg>Verify Tables</arg>
<arg>AND</arg>
<arg>Fetch All System Users From Db</arg>
<doc>Executes all the given keywords in a sequence.</doc>
<kw name="Kill Web Application" library="Common">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210728 17:59:23.639" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210728 17:59:23.650" level="INFO">${rc} = 0</msg>
<msg timestamp="20210728 17:59:23.650" level="INFO">${pids} = 27323</msg>
<status status="PASS" starttime="20210728 17:59:23.636" endtime="20210728 17:59:23.650"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:23.651" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210728 17:59:23.651" endtime="20210728 17:59:23.652"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:23.652" level="INFO">${pids} = ['27323']</msg>
<status status="PASS" starttime="20210728 17:59:23.652" endtime="20210728 17:59:23.652"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">27323</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:23.656" level="INFO">Running command 'kill 27323 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:23.653" endtime="20210728 17:59:23.657"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.652" endtime="20210728 17:59:23.657"/>
</iter>
<status status="PASS" starttime="20210728 17:59:23.652" endtime="20210728 17:59:23.657"/>
</for>
<status status="PASS" starttime="20210728 17:59:23.652" endtime="20210728 17:59:23.657"/>
</branch>
<status status="PASS" starttime="20210728 17:59:23.652" endtime="20210728 17:59:23.657"/>
</if>
<status status="PASS" starttime="20210728 17:59:23.636" endtime="20210728 17:59:23.657"/>
</kw>
<kw name="Replace Database With New Database Having Users" library="DbManager">
<kw name="Set Variable" library="BuiltIn">
<var>${source}</var>
<arg>${EXECDIR}${/}TestData${/}demo_app_with_users.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:23.658" level="INFO">${source} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:23.658" endtime="20210728 17:59:23.658"/>
</kw>
<kw name="Get Path To App Database" library="DbManager">
<var>${target}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:23.659" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210728 17:59:23.659" endtime="20210728 17:59:23.659"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210728 17:59:23.660" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210728 17:59:23.659" endtime="20210728 17:59:23.660"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:23.661" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:23.660" endtime="20210728 17:59:23.661"/>
</kw>
<msg timestamp="20210728 17:59:23.661" level="INFO">${target} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:23.659" endtime="20210728 17:59:23.661"/>
</kw>
<kw name="Run" library="OperatingSystem">
<arg>cp ${source} ${target}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:23.664" level="INFO">Running command 'cp /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:23.661" endtime="20210728 17:59:23.666"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.658" endtime="20210728 17:59:23.666"/>
</kw>
<kw name="Start Web Application With No Init Procedure" library="Common">
<kw name="Start Process" library="Process">
<arg>export FLASK_APP\=demo_app;flask run --host\=0.0.0.0 --port\=8080</arg>
<arg>shell=True</arg>
<arg>alias=flasky</arg>
<arg>cwd=${EXECDIR}${/}..${/}Flasky</arg>
<doc>Starts a new process on background.</doc>
<msg timestamp="20210728 17:59:23.668" level="INFO">Starting process:
export FLASK_APP=demo_app;flask run --host=0.0.0.0 --port=8080</msg>
<status status="PASS" starttime="20210728 17:59:23.667" endtime="20210728 17:59:23.672"/>
</kw>
<kw name="Sleep" library="BuiltIn">
<arg>1.5s</arg>
<doc>Pauses the test executed for the given time.</doc>
<msg timestamp="20210728 17:59:25.181" level="INFO">Slept 1 second 500 milliseconds</msg>
<status status="PASS" starttime="20210728 17:59:23.672" endtime="20210728 17:59:25.181"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.667" endtime="20210728 17:59:25.181"/>
</kw>
<kw name="Initialize Database Connection" library="DbManager">
<kw name="Get Path To App Database" library="DbManager">
<var>${path_to_database}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:25.183" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210728 17:59:25.182" endtime="20210728 17:59:25.183"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210728 17:59:25.184" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210728 17:59:25.184" endtime="20210728 17:59:25.184"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:25.184" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:25.184" endtime="20210728 17:59:25.184"/>
</kw>
<msg timestamp="20210728 17:59:25.184" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:25.182" endtime="20210728 17:59:25.185"/>
</kw>
<kw name="Connect To Database Using Custom Params" library="DatabaseLibrary">
<arg>sqlite3</arg>
<arg>database='${path_to_database}'</arg>
<doc>Loads the DB API 2.0 module given `dbapiModuleName` then uses it to
connect to the database using the map string `db_custom_param_string`.</doc>
<msg timestamp="20210728 17:59:25.185" level="INFO">Executing : Connect To Database Using Custom Params : sqlite3.connect(db_api_2.connect(database='/home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite')) </msg>
<status status="PASS" starttime="20210728 17:59:25.185" endtime="20210728 17:59:25.185"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.181" endtime="20210728 17:59:25.185"/>
</kw>
<kw name="Verify Tables" library="DbManager">
<kw name="Table Must Exist" library="DatabaseLibrary">
<arg>user</arg>
<doc>Check if the table given exists in the database. Set optional input `sansTran` to True to run command without an
explicit transaction commit or rollback.</doc>
<msg timestamp="20210728 17:59:25.186" level="INFO">Executing : Table Must Exist  |  user </msg>
<msg timestamp="20210728 17:59:25.186" level="INFO">Executing : Row Count  |  SELECT name FROM sqlite_master WHERE type='table' AND name='user' COLLATE NOCASE </msg>
<status status="PASS" starttime="20210728 17:59:25.186" endtime="20210728 17:59:25.186"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.186" endtime="20210728 17:59:25.186"/>
</kw>
<kw name="Fetch All System Users From Db" library="DbManager">
<kw name="Query" library="DatabaseLibrary">
<var>${users}</var>
<arg>${QUERY_ALL_USERS}</arg>
<doc>Uses the input `selectStatement` to query for the values that will be returned as a list of tuples. Set optional
input `sansTran` to True to run command without an explicit transaction commit or rollback.
Set optional input `returnAsDict` to True to return values as a list of dictionaries.</doc>
<msg timestamp="20210728 17:59:25.187" level="INFO">Executing : Query  |  select username, firstname, lastname, phone, token from user; </msg>
<msg timestamp="20210728 17:59:25.187" level="INFO">${users} = [('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'), ('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTU...</msg>
<status status="PASS" starttime="20210728 17:59:25.186" endtime="20210728 17:59:25.187"/>
</kw>
<kw name="Create List" library="BuiltIn">
<var>${SYSTEM_USERS}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210728 17:59:25.187" level="INFO">${SYSTEM_USERS} = []</msg>
<status status="PASS" starttime="20210728 17:59:25.187" endtime="20210728 17:59:25.187"/>
</kw>
<for flavor="IN">
<var>${user}</var>
<value>@{users}</value>
<iter>
<var name="${user}">('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.188" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:25.188" endtime="20210728 17:59:25.188"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.188" endtime="20210728 17:59:25.189"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:25.189" endtime="20210728 17:59:25.189"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.187" endtime="20210728 17:59:25.189"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.189" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:25.189" endtime="20210728 17:59:25.189"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.190" endtime="20210728 17:59:25.190"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:25.190" endtime="20210728 17:59:25.191"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.189" endtime="20210728 17:59:25.191"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser3', 'John', 'Brown', '0508094677', 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.191" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:25.191" endtime="20210728 17:59:25.191"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.191" endtime="20210728 17:59:25.192"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:25.192" endtime="20210728 17:59:25.192"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.191" endtime="20210728 17:59:25.192"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.187" endtime="20210728 17:59:25.192"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>@{SYSTEM_USERS}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210728 17:59:25.193" level="INFO">@{SYSTEM_USERS} = [ {'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'} | {'username': 'SuperDuperUser2', 'f...</msg>
<status status="PASS" starttime="20210728 17:59:25.193" endtime="20210728 17:59:25.193"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.186" endtime="20210728 17:59:25.193"/>
</kw>
<status status="PASS" starttime="20210728 17:59:23.635" endtime="20210728 17:59:25.193"/>
</kw>
<test id="s1-s2-t1" name="Fetching Personal Info Of System Users Without Token, API User Gets Error">
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="When Fetching Personal Info Of A System User Without A Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>If API user does not provide any Token in headers when making a GET request to /api/users/{username}
then user is supposed to get an error in the following form in the response body:
{
"message": "Token authentication required",
"status": "FAILURE"
}
This test case check that the message &amp; the status returned are correct</doc>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.199" level="INFO">${response} = {'message': 'Token authentication required', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210728 17:59:25.194" endtime="20210728 17:59:25.199"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.199" endtime="20210728 17:59:25.200"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Token authentication required</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.200" endtime="20210728 17:59:25.200"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.194" endtime="20210728 17:59:25.200"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.194" endtime="20210728 17:59:25.200"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="When Fetching Personal Info Of A System User Without A Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>If API user does not provide any Token in headers when making a GET request to /api/users/{username}
then user is supposed to get an error in the following form in the response body:
{
"message": "Token authentication required",
"status": "FAILURE"
}
This test case check that the message &amp; the status returned are correct</doc>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.204" level="INFO">${response} = {'message': 'Token authentication required', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210728 17:59:25.201" endtime="20210728 17:59:25.204"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.205" endtime="20210728 17:59:25.205"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Token authentication required</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.205" endtime="20210728 17:59:25.206"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.200" endtime="20210728 17:59:25.206"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.200" endtime="20210728 17:59:25.206"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="When Fetching Personal Info Of A System User Without A Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>If API user does not provide any Token in headers when making a GET request to /api/users/{username}
then user is supposed to get an error in the following form in the response body:
{
"message": "Token authentication required",
"status": "FAILURE"
}
This test case check that the message &amp; the status returned are correct</doc>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.210" level="INFO">${response} = {'message': 'Token authentication required', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210728 17:59:25.206" endtime="20210728 17:59:25.210"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.210" endtime="20210728 17:59:25.211"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Token authentication required</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.211" endtime="20210728 17:59:25.211"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.206" endtime="20210728 17:59:25.211"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.206" endtime="20210728 17:59:25.211"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.194" endtime="20210728 17:59:25.211"/>
</for>
<doc>If a 3.rd party unknown user, who is not a system user with a valid token,
attempts to read personal information of system users without a token, then he will get an error.
The unknown user will receive the error regardless of which system user he queries.</doc>
<status status="PASS" starttime="20210728 17:59:25.193" endtime="20210728 17:59:25.211"/>
</test>
<test id="s1-s2-t2" name="Fetching Personal Info Of System Users With Invalid Token, API User Gets Error">
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="When Fetching Personal Info Of A System User With Invalid Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>Given an invalid token, when reading personal information of a system user
via GET request to /api/users/{username}, the api
must return the following in its response body:
{
"message": "Invalid Token",
"status": "FAILURE"
}</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.213" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210728 17:59:25.213" endtime="20210728 17:59:25.213"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.218" level="INFO">${response} = {'message': 'Invalid Token', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210728 17:59:25.214" endtime="20210728 17:59:25.218"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.218" endtime="20210728 17:59:25.218"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Invalid Token</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.218" endtime="20210728 17:59:25.219"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.212" endtime="20210728 17:59:25.219"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.212" endtime="20210728 17:59:25.219"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="When Fetching Personal Info Of A System User With Invalid Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>Given an invalid token, when reading personal information of a system user
via GET request to /api/users/{username}, the api
must return the following in its response body:
{
"message": "Invalid Token",
"status": "FAILURE"
}</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.220" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210728 17:59:25.220" endtime="20210728 17:59:25.220"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.225" level="INFO">${response} = {'message': 'Invalid Token', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210728 17:59:25.220" endtime="20210728 17:59:25.225"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.225" endtime="20210728 17:59:25.225"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Invalid Token</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.226" endtime="20210728 17:59:25.226"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.219" endtime="20210728 17:59:25.226"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.219" endtime="20210728 17:59:25.226"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="When Fetching Personal Info Of A System User With Invalid Token, API User Gets Error">
<arg>${system_user}[username]</arg>
<doc>Given an invalid token, when reading personal information of a system user
via GET request to /api/users/{username}, the api
must return the following in its response body:
{
"message": "Invalid Token",
"status": "FAILURE"
}</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=Invalid Token</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.227" level="INFO">${headers} = {'Token': 'Invalid Token'}</msg>
<status status="PASS" starttime="20210728 17:59:25.227" endtime="20210728 17:59:25.227"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${username}</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.232" level="INFO">${response} = {'message': 'Invalid Token', 'status': 'FAILURE'}</msg>
<status status="PASS" starttime="20210728 17:59:25.227" endtime="20210728 17:59:25.232"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.232" endtime="20210728 17:59:25.232"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>Invalid Token</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.233" endtime="20210728 17:59:25.233"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.226" endtime="20210728 17:59:25.233"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.226" endtime="20210728 17:59:25.233"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.212" endtime="20210728 17:59:25.233"/>
</for>
<doc>If a 3.rd party unknown user, who is not a system user with a valid token,
attempts to read personal information of system users with an invalid token, then he will get an error.
The unknown user will receive the error regardless of which system user he queries.</doc>
<status status="PASS" starttime="20210728 17:59:25.212" endtime="20210728 17:59:25.233"/>
</test>
<test id="s1-s2-t3" name="Fetching Personal Info Of System User With Valid Token, API User Indeed Gets The Personal Info Of That System User">
<for flavor="IN">
<var>${api_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="Any API User With A Valid Token Can Fetch Personal Info Of All System Users">
<arg>${api_user}</arg>
<doc>Given an api_user example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
We use the token of api_user as a request header.
We pick a system_user from SYSTEM_USERS in each FOR loop iteration.
And we query the personal information of that particular system_user using the api_user's token
Imagine we have three system users X, Y, Z. If api_user is X, then he can query the personal info of X, Y, Z
with his token using this keyword.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.235" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210728 17:59:25.235" endtime="20210728 17:59:25.235"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.240" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.236" endtime="20210728 17:59:25.240"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.241" endtime="20210728 17:59:25.241"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.241" endtime="20210728 17:59:25.241"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.241" endtime="20210728 17:59:25.242"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.242" endtime="20210728 17:59:25.242"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.242" endtime="20210728 17:59:25.243"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.243" endtime="20210728 17:59:25.243"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.243" endtime="20210728 17:59:25.243"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.240" endtime="20210728 17:59:25.244"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.235" endtime="20210728 17:59:25.244"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.248" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.244" endtime="20210728 17:59:25.248"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.249" endtime="20210728 17:59:25.249"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.249" endtime="20210728 17:59:25.250"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.250" endtime="20210728 17:59:25.250"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.250" endtime="20210728 17:59:25.251"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.251" endtime="20210728 17:59:25.251"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.251" endtime="20210728 17:59:25.251"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.252" endtime="20210728 17:59:25.252"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.248" endtime="20210728 17:59:25.252"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.244" endtime="20210728 17:59:25.252"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.257" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.252" endtime="20210728 17:59:25.257"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.258" endtime="20210728 17:59:25.259"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.259" endtime="20210728 17:59:25.259"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.259" endtime="20210728 17:59:25.260"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.260" endtime="20210728 17:59:25.260"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.260" endtime="20210728 17:59:25.260"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.261" endtime="20210728 17:59:25.261"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.261" endtime="20210728 17:59:25.261"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.258" endtime="20210728 17:59:25.261"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.252" endtime="20210728 17:59:25.261"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.235" endtime="20210728 17:59:25.261"/>
</for>
<status status="PASS" starttime="20210728 17:59:25.234" endtime="20210728 17:59:25.262"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.234" endtime="20210728 17:59:25.262"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="Any API User With A Valid Token Can Fetch Personal Info Of All System Users">
<arg>${api_user}</arg>
<doc>Given an api_user example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
We use the token of api_user as a request header.
We pick a system_user from SYSTEM_USERS in each FOR loop iteration.
And we query the personal information of that particular system_user using the api_user's token
Imagine we have three system users X, Y, Z. If api_user is X, then he can query the personal info of X, Y, Z
with his token using this keyword.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.263" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210728 17:59:25.262" endtime="20210728 17:59:25.263"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.268" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.263" endtime="20210728 17:59:25.268"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.269" endtime="20210728 17:59:25.269"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.269" endtime="20210728 17:59:25.269"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.270" endtime="20210728 17:59:25.270"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.270" endtime="20210728 17:59:25.271"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.271" endtime="20210728 17:59:25.271"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.271" endtime="20210728 17:59:25.271"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.272" endtime="20210728 17:59:25.272"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.268" endtime="20210728 17:59:25.272"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.263" endtime="20210728 17:59:25.272"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.276" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.272" endtime="20210728 17:59:25.276"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.277" endtime="20210728 17:59:25.277"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.277" endtime="20210728 17:59:25.278"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.278" endtime="20210728 17:59:25.278"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.278" endtime="20210728 17:59:25.279"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.279" endtime="20210728 17:59:25.279"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.279" endtime="20210728 17:59:25.280"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.280" endtime="20210728 17:59:25.280"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.277" endtime="20210728 17:59:25.280"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.272" endtime="20210728 17:59:25.280"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.285" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.280" endtime="20210728 17:59:25.285"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.285" endtime="20210728 17:59:25.286"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.286" endtime="20210728 17:59:25.286"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.286" endtime="20210728 17:59:25.287"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.287" endtime="20210728 17:59:25.287"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.288" endtime="20210728 17:59:25.288"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.288" endtime="20210728 17:59:25.288"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.289" endtime="20210728 17:59:25.289"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.285" endtime="20210728 17:59:25.289"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.280" endtime="20210728 17:59:25.289"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.263" endtime="20210728 17:59:25.289"/>
</for>
<status status="PASS" starttime="20210728 17:59:25.262" endtime="20210728 17:59:25.289"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.262" endtime="20210728 17:59:25.289"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="Any API User With A Valid Token Can Fetch Personal Info Of All System Users">
<arg>${api_user}</arg>
<doc>Given an api_user example:
{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}
We use the token of api_user as a request header.
We pick a system_user from SYSTEM_USERS in each FOR loop iteration.
And we query the personal information of that particular system_user using the api_user's token
Imagine we have three system users X, Y, Z. If api_user is X, then he can query the personal info of X, Y, Z
with his token using this keyword.</doc>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.290" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210728 17:59:25.290" endtime="20210728 17:59:25.290"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.296" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.292" endtime="20210728 17:59:25.297"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.297" endtime="20210728 17:59:25.298"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.298" endtime="20210728 17:59:25.298"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.298" endtime="20210728 17:59:25.299"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.299" endtime="20210728 17:59:25.299"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.299" endtime="20210728 17:59:25.299"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.300" endtime="20210728 17:59:25.300"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.300" endtime="20210728 17:59:25.300"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.297" endtime="20210728 17:59:25.300"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.291" endtime="20210728 17:59:25.301"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.306" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.301" endtime="20210728 17:59:25.306"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.307" endtime="20210728 17:59:25.307"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.307" endtime="20210728 17:59:25.308"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.308" endtime="20210728 17:59:25.308"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.308" endtime="20210728 17:59:25.309"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.309" endtime="20210728 17:59:25.309"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.309" endtime="20210728 17:59:25.309"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.310" endtime="20210728 17:59:25.310"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.306" endtime="20210728 17:59:25.310"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.301" endtime="20210728 17:59:25.310"/>
</iter>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.318" level="INFO">${response} = {'message': 'retrieval succesful', 'payload': {'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677'}, 'status': 'SUCCESS'}</msg>
<status status="PASS" starttime="20210728 17:59:25.311" endtime="20210728 17:59:25.318"/>
</kw>
<kw name="Verify Response Contains Personal Info">
<arg>${system_user}</arg>
<arg>${response}</arg>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>SUCCESS</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.318" endtime="20210728 17:59:25.319"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>retrieval succesful</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.319" endtime="20210728 17:59:25.319"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][firstname]</arg>
<arg>${system_user}[firstname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.319" endtime="20210728 17:59:25.320"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][lastname]</arg>
<arg>${system_user}[lastname]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.320" endtime="20210728 17:59:25.320"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[payload][phone]</arg>
<arg>${system_user}[phone]</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" starttime="20210728 17:59:25.320" endtime="20210728 17:59:25.320"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>username</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.321" endtime="20210728 17:59:25.321"/>
</kw>
<kw name="Dictionary Should Not Contain Key" library="Collections">
<arg>${response}[payload]</arg>
<arg>password</arg>
<doc>Fails if ``key`` is found from ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:25.321" endtime="20210728 17:59:25.321"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.318" endtime="20210728 17:59:25.321"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.310" endtime="20210728 17:59:25.321"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.290" endtime="20210728 17:59:25.321"/>
</for>
<status status="PASS" starttime="20210728 17:59:25.290" endtime="20210728 17:59:25.321"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.289" endtime="20210728 17:59:25.322"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.234" endtime="20210728 17:59:25.322"/>
</for>
<doc>Imagine we have three system users X, Y, Z. This test case checks that
X, Y, Z can query the personal info of X, Y, Z with a their own respective keys.</doc>
<status status="PASS" starttime="20210728 17:59:25.234" endtime="20210728 17:59:25.322"/>
</test>
<test id="s1-s2-t4" name="Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<for flavor="IN">
<var>${api_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="When Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.324" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210728 17:59:25.324" endtime="20210728 17:59:25.324"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/non-existing-user</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.334" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210728 17:59:25.335" level="FAIL">System under test has crashed with 5XX</msg>
<status status="FAIL" starttime="20210728 17:59:25.324" endtime="20210728 17:59:25.335"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210728 17:59:25.335" endtime="20210728 17:59:25.335"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>user does not exist</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210728 17:59:25.335" endtime="20210728 17:59:25.335"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:25.323" endtime="20210728 17:59:25.336"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:25.323" endtime="20210728 17:59:25.336"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="When Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.338" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210728 17:59:25.337" endtime="20210728 17:59:25.338"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/non-existing-user</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.342" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210728 17:59:25.343" level="FAIL">System under test has crashed with 5XX</msg>
<status status="FAIL" starttime="20210728 17:59:25.338" endtime="20210728 17:59:25.343"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210728 17:59:25.343" endtime="20210728 17:59:25.343"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>user does not exist</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210728 17:59:25.343" endtime="20210728 17:59:25.343"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:25.336" endtime="20210728 17:59:25.343"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:25.336" endtime="20210728 17:59:25.343"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="When Fetching Personal Info Of Non-Existing User With Valid Token, API User Gets Error">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:25.345" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210728 17:59:25.344" endtime="20210728 17:59:25.345"/>
</kw>
<kw name="GET" library="CRUD_Library">
<var>${response}</var>
<arg>/users/non-existing-user</arg>
<arg>headers=${headers}</arg>
<doc>Sends a GET request to the endpoint.</doc>
<msg timestamp="20210728 17:59:25.350" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210728 17:59:25.350" level="FAIL">System under test has crashed with 5XX</msg>
<status status="FAIL" starttime="20210728 17:59:25.345" endtime="20210728 17:59:25.350"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[status]</arg>
<arg>FAILURE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210728 17:59:25.351" endtime="20210728 17:59:25.351"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response}[message]</arg>
<arg>user does not exist</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20210728 17:59:25.351" endtime="20210728 17:59:25.351"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:25.344" endtime="20210728 17:59:25.351"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:25.344" endtime="20210728 17:59:25.351"/>
</iter>
<status status="FAIL" starttime="20210728 17:59:25.323" endtime="20210728 17:59:25.351"/>
</for>
<doc>Imagine we have three system users X, Y, Z. Each of them wants to query personal
information of non-existing system user A. The system should return a response
having a message "user does not exist" with status FAILURE</doc>
<status status="FAIL" starttime="20210728 17:59:25.322" endtime="20210728 17:59:25.351">Several failures occurred:

1) System under test has crashed with 5XX

2) System under test has crashed with 5XX

3) System under test has crashed with 5XX</status>
</test>
<kw name="Kill Web Application" library="Common" type="TEARDOWN">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210728 17:59:25.356" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210728 17:59:25.366" level="INFO">${rc} = 0</msg>
<msg timestamp="20210728 17:59:25.367" level="INFO">${pids} = 27346
27353
27373</msg>
<status status="PASS" starttime="20210728 17:59:25.353" endtime="20210728 17:59:25.367"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:25.368" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210728 17:59:25.367" endtime="20210728 17:59:25.368"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:25.369" level="INFO">${pids} = ['27346', '27353', '27373']</msg>
<status status="PASS" starttime="20210728 17:59:25.368" endtime="20210728 17:59:25.369"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">27346</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:25.373" level="INFO">Running command 'kill 27346 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:25.369" endtime="20210728 17:59:25.373"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.369" endtime="20210728 17:59:25.373"/>
</iter>
<iter>
<var name="${pid}">27353</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:25.376" level="INFO">Running command 'kill 27353 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:25.374" endtime="20210728 17:59:25.377"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.374" endtime="20210728 17:59:25.377"/>
</iter>
<iter>
<var name="${pid}">27373</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:25.382" level="INFO">Running command 'kill 27373 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:25.378" endtime="20210728 17:59:25.382"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.378" endtime="20210728 17:59:25.383"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.369" endtime="20210728 17:59:25.383"/>
</for>
<status status="PASS" starttime="20210728 17:59:25.368" endtime="20210728 17:59:25.383"/>
</branch>
<status status="PASS" starttime="20210728 17:59:25.368" endtime="20210728 17:59:25.383"/>
</if>
<status status="PASS" starttime="20210728 17:59:25.352" endtime="20210728 17:59:25.383"/>
</kw>
<doc>This test suite contains test cases for CRF Demo API.
Documentation for the API can be found:
https://github.com/Interview-demoapp/Flasky
The acceptance criteria we verify here is
"2: As an API Consumer, if authenticated, I can get personal information of users"
Definitions
(1) System User: The user, who is registered to the system under test
(2) API User: The user, who calls the API to fetch personal information about the system user</doc>
<status status="FAIL" starttime="20210728 17:59:23.624" endtime="20210728 17:59:25.383"/>
</suite>
<suite id="s1-s3" name="3-Updating-Personal-Information" source="/home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/Tests/API/3-Updating-Personal-Information.robot">
<test id="s1-s3-t1" name="With Any Valid Token, Attempting To Update Username Of Each System User With Empty String Should Fail">
<kw name="Run Keywords" library="BuiltIn" type="SETUP">
<arg>Kill Web Application</arg>
<arg>AND</arg>
<arg>Replace Database With New Database Having Users</arg>
<arg>AND</arg>
<arg>Start Web Application With No Init Procedure</arg>
<arg>AND</arg>
<arg>Initialize Database Connection</arg>
<arg>AND</arg>
<arg>Verify Tables</arg>
<arg>AND</arg>
<arg>Fetch All System Users From Db</arg>
<doc>Executes all the given keywords in a sequence.</doc>
<kw name="Kill Web Application" library="Common">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210728 17:59:25.408" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210728 17:59:25.419" level="INFO">${rc} = 0</msg>
<msg timestamp="20210728 17:59:25.419" level="INFO">${pids} = 27402</msg>
<status status="PASS" starttime="20210728 17:59:25.405" endtime="20210728 17:59:25.419"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:25.421" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210728 17:59:25.421" endtime="20210728 17:59:25.421"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:25.422" level="INFO">${pids} = ['27402']</msg>
<status status="PASS" starttime="20210728 17:59:25.422" endtime="20210728 17:59:25.422"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">27402</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:25.426" level="INFO">Running command 'kill 27402 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:25.423" endtime="20210728 17:59:25.426"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.422" endtime="20210728 17:59:25.426"/>
</iter>
<status status="PASS" starttime="20210728 17:59:25.422" endtime="20210728 17:59:25.426"/>
</for>
<status status="PASS" starttime="20210728 17:59:25.422" endtime="20210728 17:59:25.426"/>
</branch>
<status status="PASS" starttime="20210728 17:59:25.422" endtime="20210728 17:59:25.426"/>
</if>
<status status="PASS" starttime="20210728 17:59:25.405" endtime="20210728 17:59:25.427"/>
</kw>
<kw name="Replace Database With New Database Having Users" library="DbManager">
<kw name="Set Variable" library="BuiltIn">
<var>${source}</var>
<arg>${EXECDIR}${/}TestData${/}demo_app_with_users.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:25.428" level="INFO">${source} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:25.427" endtime="20210728 17:59:25.428"/>
</kw>
<kw name="Get Path To App Database" library="DbManager">
<var>${target}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:25.429" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210728 17:59:25.428" endtime="20210728 17:59:25.429"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210728 17:59:25.429" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210728 17:59:25.429" endtime="20210728 17:59:25.429"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:25.430" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:25.429" endtime="20210728 17:59:25.430"/>
</kw>
<msg timestamp="20210728 17:59:25.430" level="INFO">${target} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:25.428" endtime="20210728 17:59:25.430"/>
</kw>
<kw name="Run" library="OperatingSystem">
<arg>cp ${source} ${target}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:25.433" level="INFO">Running command 'cp /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject/TestData/demo_app_with_users.sqlite /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:25.430" endtime="20210728 17:59:25.435"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.427" endtime="20210728 17:59:25.435"/>
</kw>
<kw name="Start Web Application With No Init Procedure" library="Common">
<kw name="Start Process" library="Process">
<arg>export FLASK_APP\=demo_app;flask run --host\=0.0.0.0 --port\=8080</arg>
<arg>shell=True</arg>
<arg>alias=flasky</arg>
<arg>cwd=${EXECDIR}${/}..${/}Flasky</arg>
<doc>Starts a new process on background.</doc>
<msg timestamp="20210728 17:59:25.436" level="INFO">Starting process:
export FLASK_APP=demo_app;flask run --host=0.0.0.0 --port=8080</msg>
<status status="PASS" starttime="20210728 17:59:25.436" endtime="20210728 17:59:25.441"/>
</kw>
<kw name="Sleep" library="BuiltIn">
<arg>1.5s</arg>
<doc>Pauses the test executed for the given time.</doc>
<msg timestamp="20210728 17:59:26.942" level="INFO">Slept 1 second 500 milliseconds</msg>
<status status="PASS" starttime="20210728 17:59:25.441" endtime="20210728 17:59:26.942"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.435" endtime="20210728 17:59:26.942"/>
</kw>
<kw name="Initialize Database Connection" library="DbManager">
<kw name="Get Path To App Database" library="DbManager">
<var>${path_to_database}</var>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${EXECDIR}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:26.943" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/TestProject</msg>
<status status="PASS" starttime="20210728 17:59:26.943" endtime="20210728 17:59:26.943"/>
</kw>
<kw name="Fetch From Left" library="String">
<var>${path_to_database}</var>
<arg>${path_to_database}</arg>
<arg>TestProject</arg>
<doc>Returns contents of the ``string`` before the first occurrence of ``marker``.</doc>
<msg timestamp="20210728 17:59:26.944" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/</msg>
<status status="PASS" starttime="20210728 17:59:26.944" endtime="20210728 17:59:26.944"/>
</kw>
<kw name="Set Variable" library="BuiltIn">
<var>${path_to_database}</var>
<arg>${path_to_database}Flasky${/}instance${/}demo_app.sqlite</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<msg timestamp="20210728 17:59:26.944" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:26.944" endtime="20210728 17:59:26.944"/>
</kw>
<msg timestamp="20210728 17:59:26.944" level="INFO">${path_to_database} = /home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite</msg>
<status status="PASS" starttime="20210728 17:59:26.943" endtime="20210728 17:59:26.944"/>
</kw>
<kw name="Connect To Database Using Custom Params" library="DatabaseLibrary">
<arg>sqlite3</arg>
<arg>database='${path_to_database}'</arg>
<doc>Loads the DB API 2.0 module given `dbapiModuleName` then uses it to
connect to the database using the map string `db_custom_param_string`.</doc>
<msg timestamp="20210728 17:59:26.945" level="INFO">Executing : Connect To Database Using Custom Params : sqlite3.connect(db_api_2.connect(database='/home/hakan/Python/Robot/CRF_Demo_Solution/Flasky/instance/demo_app.sqlite')) </msg>
<status status="PASS" starttime="20210728 17:59:26.944" endtime="20210728 17:59:26.945"/>
</kw>
<status status="PASS" starttime="20210728 17:59:26.943" endtime="20210728 17:59:26.945"/>
</kw>
<kw name="Verify Tables" library="DbManager">
<kw name="Table Must Exist" library="DatabaseLibrary">
<arg>user</arg>
<doc>Check if the table given exists in the database. Set optional input `sansTran` to True to run command without an
explicit transaction commit or rollback.</doc>
<msg timestamp="20210728 17:59:26.946" level="INFO">Executing : Table Must Exist  |  user </msg>
<msg timestamp="20210728 17:59:26.946" level="INFO">Executing : Row Count  |  SELECT name FROM sqlite_master WHERE type='table' AND name='user' COLLATE NOCASE </msg>
<status status="PASS" starttime="20210728 17:59:26.946" endtime="20210728 17:59:26.946"/>
</kw>
<status status="PASS" starttime="20210728 17:59:26.945" endtime="20210728 17:59:26.946"/>
</kw>
<kw name="Fetch All System Users From Db" library="DbManager">
<kw name="Query" library="DatabaseLibrary">
<var>${users}</var>
<arg>${QUERY_ALL_USERS}</arg>
<doc>Uses the input `selectStatement` to query for the values that will be returned as a list of tuples. Set optional
input `sansTran` to True to run command without an explicit transaction commit or rollback.
Set optional input `returnAsDict` to True to return values as a list of dictionaries.</doc>
<msg timestamp="20210728 17:59:26.947" level="INFO">Executing : Query  |  select username, firstname, lastname, phone, token from user; </msg>
<msg timestamp="20210728 17:59:26.947" level="INFO">${users} = [('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'), ('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTU...</msg>
<status status="PASS" starttime="20210728 17:59:26.947" endtime="20210728 17:59:26.948"/>
</kw>
<kw name="Create List" library="BuiltIn">
<var>${SYSTEM_USERS}</var>
<doc>Returns a list containing given items.</doc>
<msg timestamp="20210728 17:59:26.948" level="INFO">${SYSTEM_USERS} = []</msg>
<status status="PASS" starttime="20210728 17:59:26.948" endtime="20210728 17:59:26.948"/>
</kw>
<for flavor="IN">
<var>${user}</var>
<value>@{users}</value>
<iter>
<var name="${user}">('SuperDuperUser1', 'David', 'Holm', '0506627124', 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.949" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:26.948" endtime="20210728 17:59:26.949"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:26.949" endtime="20210728 17:59:26.949"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:26.949" endtime="20210728 17:59:26.950"/>
</kw>
<status status="PASS" starttime="20210728 17:59:26.948" endtime="20210728 17:59:26.950"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser2', 'Hakan', 'Holm', '0407563452', 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.950" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:26.950" endtime="20210728 17:59:26.950"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:26.950" endtime="20210728 17:59:26.951"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:26.951" endtime="20210728 17:59:26.951"/>
</kw>
<status status="PASS" starttime="20210728 17:59:26.950" endtime="20210728 17:59:26.951"/>
</iter>
<iter>
<var name="${user}">('SuperDuperUser3', 'John', 'Brown', '0508094677', 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3')</var>
<kw name="Create Dictionary" library="BuiltIn">
<var>&amp;{new_user}</var>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.952" level="INFO">&amp;{new_user} = { }</msg>
<status status="PASS" starttime="20210728 17:59:26.951" endtime="20210728 17:59:26.952"/>
</kw>
<kw name="Set To Dictionary" library="Collections">
<arg>${new_user}</arg>
<arg>username=${user}[0]</arg>
<arg>firstname=${user}[1]</arg>
<arg>lastname=${user}[2]</arg>
<arg>phone=${user}[3]</arg>
<arg>token=${user}[4]</arg>
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<status status="PASS" starttime="20210728 17:59:26.952" endtime="20210728 17:59:26.952"/>
</kw>
<kw name="Append To List" library="Collections">
<arg>${SYSTEM_USERS}</arg>
<arg>${new_user}</arg>
<doc>Adds ``values`` to the end of ``list``.</doc>
<status status="PASS" starttime="20210728 17:59:26.953" endtime="20210728 17:59:26.953"/>
</kw>
<status status="PASS" starttime="20210728 17:59:26.951" endtime="20210728 17:59:26.953"/>
</iter>
<status status="PASS" starttime="20210728 17:59:26.948" endtime="20210728 17:59:26.953"/>
</for>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>@{SYSTEM_USERS}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210728 17:59:26.953" level="INFO">@{SYSTEM_USERS} = [ {'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'} | {'username': 'SuperDuperUser2', 'f...</msg>
<status status="PASS" starttime="20210728 17:59:26.953" endtime="20210728 17:59:26.953"/>
</kw>
<status status="PASS" starttime="20210728 17:59:26.946" endtime="20210728 17:59:26.954"/>
</kw>
<status status="PASS" starttime="20210728 17:59:25.404" endtime="20210728 17:59:26.954"/>
</kw>
<for flavor="IN">
<var>${api_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="Even With Valid Token, Cannot Set Empty Username To Any System User">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.955" level="INFO">${headers} = {'Token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</msg>
<status status="PASS" starttime="20210728 17:59:26.954" endtime="20210728 17:59:26.955"/>
</kw>
<kw name="Create Dictionary" library="BuiltIn">
<var>${payload}</var>
<arg>username=${EMPTY}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.956" level="INFO">${payload} = {'username': ''}</msg>
<status status="PASS" starttime="20210728 17:59:26.955" endtime="20210728 17:59:26.956"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="PUT" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<arg>body=${payload}</arg>
<doc>Sends a PUT request to the endpoint.
    The endpoint is joined with the base_url given on library init.</doc>
<msg timestamp="20210728 17:59:26.969" level="ERROR">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210728 17:59:26.970" level="FAIL">We expected a JSON, but received text/html</msg>
<status status="FAIL" starttime="20210728 17:59:26.956" endtime="20210728 17:59:26.970"/>
</kw>
<kw name="Verify Response">
<arg>${response}</arg>
<arg>message=Field update not allowed</arg>
<arg>status=FAILURE</arg>
<status status="NOT RUN" starttime="20210728 17:59:26.970" endtime="20210728 17:59:26.970"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:26.956" endtime="20210728 17:59:26.970"/>
</iter>
<status status="FAIL" starttime="20210728 17:59:26.956" endtime="20210728 17:59:26.970"/>
</for>
<status status="FAIL" starttime="20210728 17:59:26.954" endtime="20210728 17:59:26.970"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:26.954" endtime="20210728 17:59:26.970"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser2', 'firstname': 'Hakan', 'lastname': 'Holm', 'phone': '0407563452', 'token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</var>
<kw name="Even With Valid Token, Cannot Set Empty Username To Any System User">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.971" level="INFO">${headers} = {'Token': 'MzI2MTg2NjIyMDY0OTk3NTc1ODcxMjEwNDQ2OTUxMTUzMTQxOTY4'}</msg>
<status status="PASS" starttime="20210728 17:59:26.971" endtime="20210728 17:59:26.971"/>
</kw>
<kw name="Create Dictionary" library="BuiltIn">
<var>${payload}</var>
<arg>username=${EMPTY}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.972" level="INFO">${payload} = {'username': ''}</msg>
<status status="PASS" starttime="20210728 17:59:26.972" endtime="20210728 17:59:26.972"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="PUT" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<arg>body=${payload}</arg>
<doc>Sends a PUT request to the endpoint.
    The endpoint is joined with the base_url given on library init.</doc>
<msg timestamp="20210728 17:59:26.976" level="ERROR">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210728 17:59:26.977" level="FAIL">We expected a JSON, but received text/html</msg>
<status status="FAIL" starttime="20210728 17:59:26.973" endtime="20210728 17:59:26.977"/>
</kw>
<kw name="Verify Response">
<arg>${response}</arg>
<arg>message=Field update not allowed</arg>
<arg>status=FAILURE</arg>
<status status="NOT RUN" starttime="20210728 17:59:26.977" endtime="20210728 17:59:26.977"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:26.972" endtime="20210728 17:59:26.977"/>
</iter>
<status status="FAIL" starttime="20210728 17:59:26.972" endtime="20210728 17:59:26.977"/>
</for>
<status status="FAIL" starttime="20210728 17:59:26.970" endtime="20210728 17:59:26.977"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:26.970" endtime="20210728 17:59:26.977"/>
</iter>
<iter>
<var name="${api_user}">{'username': 'SuperDuperUser3', 'firstname': 'John', 'lastname': 'Brown', 'phone': '0508094677', 'token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</var>
<kw name="Even With Valid Token, Cannot Set Empty Username To Any System User">
<arg>${api_user}</arg>
<kw name="Create Dictionary" library="BuiltIn">
<var>${headers}</var>
<arg>Token=${api_user}[token]</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.978" level="INFO">${headers} = {'Token': 'MTgxMjcxNDM1OTIzNTUzNjMyMzIxNTgzNjY0MTg1MzU4MTg0MTA3'}</msg>
<status status="PASS" starttime="20210728 17:59:26.978" endtime="20210728 17:59:26.978"/>
</kw>
<kw name="Create Dictionary" library="BuiltIn">
<var>${payload}</var>
<arg>username=${EMPTY}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20210728 17:59:26.979" level="INFO">${payload} = {'username': ''}</msg>
<status status="PASS" starttime="20210728 17:59:26.978" endtime="20210728 17:59:26.979"/>
</kw>
<for flavor="IN">
<var>${system_user}</var>
<value>@{SYSTEM_USERS}</value>
<iter>
<var name="${system_user}">{'username': 'SuperDuperUser1', 'firstname': 'David', 'lastname': 'Holm', 'phone': '0506627124', 'token': 'MTczNzAyNjc5NDg4Mzc1MzcwNDIwODAyOTM1NTExMjU4NzkzNDM2'}</var>
<kw name="PUT" library="CRUD_Library">
<var>${response}</var>
<arg>/users/${system_user}[username]</arg>
<arg>headers=${headers}</arg>
<arg>body=${payload}</arg>
<doc>Sends a PUT request to the endpoint.
    The endpoint is joined with the base_url given on library init.</doc>
<msg timestamp="20210728 17:59:26.985" level="ERROR">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210728 17:59:26.986" level="FAIL">We expected a JSON, but received text/html</msg>
<status status="FAIL" starttime="20210728 17:59:26.980" endtime="20210728 17:59:26.986"/>
</kw>
<kw name="Verify Response">
<arg>${response}</arg>
<arg>message=Field update not allowed</arg>
<arg>status=FAILURE</arg>
<status status="NOT RUN" starttime="20210728 17:59:26.986" endtime="20210728 17:59:26.986"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:26.979" endtime="20210728 17:59:26.986"/>
</iter>
<status status="FAIL" starttime="20210728 17:59:26.979" endtime="20210728 17:59:26.986"/>
</for>
<status status="FAIL" starttime="20210728 17:59:26.977" endtime="20210728 17:59:26.986"/>
</kw>
<status status="FAIL" starttime="20210728 17:59:26.977" endtime="20210728 17:59:26.986"/>
</iter>
<status status="FAIL" starttime="20210728 17:59:26.954" endtime="20210728 17:59:26.987"/>
</for>
<kw name="Kill Web Application" library="Common" type="TEARDOWN">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${pids}</var>
<arg>pgrep -f 'flask run --host=0.0.0.0 --port=8080'</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210728 17:59:26.991" level="INFO">Running command 'pgrep -f 'flask run --host=0.0.0.0 --port=8080' 2&gt;&amp;1'.</msg>
<msg timestamp="20210728 17:59:27.000" level="INFO">${rc} = 0</msg>
<msg timestamp="20210728 17:59:27.000" level="INFO">${pids} = 27425
27432
27438</msg>
<status status="PASS" starttime="20210728 17:59:26.987" endtime="20210728 17:59:27.000"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${is_not_empty}</var>
<arg>$pids!=''</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:27.001" level="INFO">${is_not_empty} = True</msg>
<status status="PASS" starttime="20210728 17:59:27.001" endtime="20210728 17:59:27.001"/>
</kw>
<if>
<branch type="IF" condition="${is_not_empty}">
<kw name="Evaluate" library="BuiltIn">
<var>${pids}</var>
<arg>$pids.split('\\n')</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20210728 17:59:27.002" level="INFO">${pids} = ['27425', '27432', '27438']</msg>
<status status="PASS" starttime="20210728 17:59:27.002" endtime="20210728 17:59:27.002"/>
</kw>
<for flavor="IN">
<var>${pid}</var>
<value>@{pids}</value>
<iter>
<var name="${pid}">27425</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:27.006" level="INFO">Running command 'kill 27425 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:27.003" endtime="20210728 17:59:27.007"/>
</kw>
<status status="PASS" starttime="20210728 17:59:27.003" endtime="20210728 17:59:27.007"/>
</iter>
<iter>
<var name="${pid}">27432</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:27.010" level="INFO">Running command 'kill 27432 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:27.008" endtime="20210728 17:59:27.011"/>
</kw>
<status status="PASS" starttime="20210728 17:59:27.007" endtime="20210728 17:59:27.011"/>
</iter>
<iter>
<var name="${pid}">27438</var>
<kw name="Run" library="OperatingSystem">
<arg>kill ${pid}</arg>
<doc>Runs the given command in the system and returns the output.</doc>
<msg timestamp="20210728 17:59:27.015" level="INFO">Running command 'kill 27438 2&gt;&amp;1'.</msg>
<status status="PASS" starttime="20210728 17:59:27.011" endtime="20210728 17:59:27.016"/>
</kw>
<status status="PASS" starttime="20210728 17:59:27.011" endtime="20210728 17:59:27.016"/>
</iter>
<status status="PASS" starttime="20210728 17:59:27.002" endtime="20210728 17:59:27.016"/>
</for>
<status status="PASS" starttime="20210728 17:59:27.002" endtime="20210728 17:59:27.016"/>
</branch>
<status status="PASS" starttime="20210728 17:59:27.002" endtime="20210728 17:59:27.016"/>
</if>
<status status="PASS" starttime="20210728 17:59:26.987" endtime="20210728 17:59:27.016"/>
</kw>
<doc>Imagine we have three system users X, Y, Z. We make PUT requests to /api/users/&lt;username&gt;
where &lt;username&gt; is any registered user's username. In the requests' body, we set an empty
username. Each time, the request should fail each time with the following response body:
{
"message": "Field update not allowed",
"status": "FAILURE"
}</doc>
<status status="FAIL" starttime="20210728 17:59:25.400" endtime="20210728 17:59:27.016">Several failures occurred:

1) We expected a JSON, but received text/html

2) We expected a JSON, but received text/html

3) We expected a JSON, but received text/html</status>
</test>
<doc>This test suite contains test cases for CRF Demo API.
Documentation for the API can be found:
https://github.com/Interview-demoapp/Flasky
The acceptance criteria we verify here is
"2: As an API Consumer, if authenticated, I can update personal information of users"
Definitions
(1) System User: The user, who is registered to the system under test
(2) API User: The user, who calls the API to update personal information of the system user</doc>
<status status="FAIL" starttime="20210728 17:59:25.388" endtime="20210728 17:59:27.017"/>
</suite>
<status status="FAIL" starttime="20210728 17:59:20.948" endtime="20210728 17:59:27.021"/>
</suite>
<statistics>
<total>
<stat pass="4" fail="4" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="4" fail="4" skip="0" id="s1" name="API">API</stat>
<stat pass="1" fail="2" skip="0" id="s1-s1" name="1-Reviewing-Users">API.1-Reviewing-Users</stat>
<stat pass="3" fail="1" skip="0" id="s1-s2" name="2-Getting-Personal-Information">API.2-Getting-Personal-Information</stat>
<stat pass="0" fail="1" skip="0" id="s1-s3" name="3-Updating-Personal-Information">API.3-Updating-Personal-Information</stat>
</suite>
</statistics>
<errors>
<msg timestamp="20210728 17:59:25.334" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210728 17:59:25.342" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210728 17:59:25.350" level="ERROR">HTTP error occurred: 500 Server Error: INTERNAL SERVER ERROR for url: http://0.0.0.0:8080/api/users/non-existing-user</msg>
<msg timestamp="20210728 17:59:26.969" level="ERROR">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210728 17:59:26.976" level="ERROR">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
<msg timestamp="20210728 17:59:26.985" level="ERROR">HTTP error occurred: 400 Client Error: BAD REQUEST for url: http://0.0.0.0:8080/api/users/SuperDuperUser1</msg>
</errors>
</robot>
